"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4382],{98332:function(e,t,a){a.d(t,{Z:function(){return d}});var r=a(63801),n=a(63153),s=a(67294),o=a(36325),l=a(56785),i=a(85893);const c={information:{text:"text-high-emphesis",color:"bg-purple bg-opacity-20 text-high-emphesis",icon:(0,i.jsx)("svg",{className:"h-5 w-5 text-purple",viewBox:"0 0 33 33",xmlns:"http://www.w3.org/2000/svg",path:"currentColor",fill:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M16.5 0C7.40184 0 0 7.40184 0 16.5C0 25.5982 7.40184 33 16.5 33C25.5982 33 33 25.5982 33 16.5C33 7.40184 25.5982 0 16.5 0ZM16.5 25.9909C15.5747 25.9909 14.8245 25.2407 14.8245 24.3154C14.8245 23.39 15.5747 22.6398 16.5 22.6398C17.4253 22.6398 18.1755 23.39 18.1755 24.3154C18.1755 25.2407 17.4253 25.9909 16.5 25.9909ZM18.1755 17.3898C18.1755 18.3152 17.4253 19.0654 16.5 19.0654C15.5747 19.0654 14.8245 18.3152 14.8245 17.3898V8.56534C14.8245 7.63999 15.5747 6.8898 16.5 6.8898C17.4253 6.8898 18.1755 7.63999 18.1755 8.56534V17.3898Z",fill:"currentColor"})})},warning:{text:"text-high-emphesis",color:"bg-yellow bg-opacity-25 text-high-emphesis",icon:(0,i.jsx)("svg",{className:"w-5 h-5 text-yellow",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})},error:{text:"text-red",color:"bg-red bg-opacity-25 text-high-emphesis",icon:(0,i.jsx)(r.$Ow,{className:"h-5 w-5 text-red"})}};function d({title:e,message:t,type:a="warning",className:r="",showIcon:d=!1,dismissable:u=!0}){const{0:m,1:h}=(0,s.useState)(!0),{color:x,icon:p,text:f}=c[a];return t&&m?(0,i.jsxs)("div",{className:(0,o.AK)("flex flex-row rounded p-4 gap-3",x,r),children:[d&&(0,i.jsx)("div",{children:p}),(0,i.jsxs)("div",{className:"flex flex-col gap-1.5 justify-center",children:[e&&(0,i.jsx)(l.Z,{weight:700,className:(0,o.AK)(f,"text-left inline leading-6"),children:e}),(0,i.jsx)(l.Z,{variant:"sm",weight:700,className:(0,o.AK)(f,"text-left"),children:t})]}),u&&(0,i.jsxs)("button",{type:"button",onClick:()=>h(!m),className:"inline-flex opacity-80 hover:opacity-100 focused:opacity-100 rounded text-primary hover:text-high-emphesis focus:text-high-emphesis focus:outline-none focus:ring focus:ring-offset focus:ring-offset-purple focus:ring-purple",children:[(0,i.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,i.jsx)(n.b0D,{className:"w-5 h-5","aria-hidden":"true"})]})]}):null}},23210:function(e,t,a){var r=a(77062),n=(a(67294),a(85893));function s({header:e,footer:t,backgroundImage:a="",title:r="",description:s="",children:o,className:l}){return(0,n.jsxs)("div",{className:"relative ".concat(l),style:{borderRadius:"10px",backgroundImage:"url(".concat(a,")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center bottom"},children:[e&&(0,n.jsx)(n.Fragment,{children:e}),(0,n.jsxs)("div",{className:"px-2 py-4 sm:p-8",children:[r&&(0,n.jsx)("div",{className:"mb-4 text-2xl text-high-emphesis",children:r}),s&&(0,n.jsx)("div",{className:"text-base text-secondary",children:s}),o]}),t&&(0,n.jsx)(n.Fragment,{children:t})]})}s.Header=function({className:e,children:t}){return(0,n.jsx)("div",{className:(0,r.A)("flex items-center rounded-t px-4 sm:px-8 py-4 sm:py-6",e),children:t})},s.Gradient=({children:e,className:t})=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:(0,r.A)("rounded pointer-events-none absolute w-full h-full bg-gradient-to-r from-opaque-blue to-opaque-pink opacity-40",t)}),e]}),t.Z=s},92552:function(e,t,a){var r=a(59499),n=a(4730),s=(a(67294),a(85893));const o=["set","className","checked"];function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.Z=function(e){let{set:t,className:a="",checked:r}=e,l=(0,n.Z)(e,o);return(0,s.jsx)("div",{className:"relative flex items-center justify-center",children:(0,s.jsx)("input",i({type:"checkbox",onChange:e=>t?t(e.target.checked):null,className:"border border-dark-700 checked:bg-gradient-to-r checked:border-[3px] checked:from-blue checked:to-pink cursor-pointer appearance-none h-5 w-5 rounded-[4px] bg-dark-900 disabled:bg-dark-1000 disabled:border-dark-800 ".concat(a),checked:r},l))})}},13752:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(59499),n=a(4730),s=a(36325),o=a(25675);var l=a(85893);const i=["src","width","height","layout"];function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u=e=>{let{src:t,width:a,height:r,layout:c}=e,u=(0,n.Z)(e,i);const m=parseInt(String(r),10)>=40&&parseInt(String(a),10)>=40,h="string"===typeof t&&t.includes("http")?s.HT:void 0;return(0,l.jsx)("div",{style:{width:a,height:r},className:"overflow-hidden rounded",children:m?(0,l.jsx)(o.default,d({loader:h,src:t,width:a,height:r,layout:c,placeholder:"blur",blurDataURL:"data:image/svg+xml;base64,".concat((p=a,f=r,x='\n<svg width="'.concat(p,'" height="').concat(f,'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n  <defs>\n    <linearGradient id="g">\n      <stop stop-color="#333" offset="20%" />\n      <stop stop-color="#222" offset="50%" />\n      <stop stop-color="#333" offset="70%" />\n    </linearGradient>\n  </defs>\n  <rect width="').concat(p,'" height="').concat(f,'" fill="#333" />\n  <rect id="r" width="').concat(p,'" height="').concat(f,'" fill="url(#g)" />\n  <animate xlink:href="#r" attributeName="x" from="-').concat(p,'" to="').concat(p,'" dur="1s" repeatCount="indefinite"  />\n</svg>'),window.btoa(x)))},u)):(0,l.jsx)(o.default,d({loader:h,src:t,width:a,height:r,layout:c,placeholder:"empty"},u))});var x,p,f}},23987:function(e,t,a){var r=a(59499),n=a(4730),s=a(36325),o=a(67294),l=a(85893);const i=["value","onUserInput","placeholder","className","align","fontSize"];function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const u=RegExp("^\\d*$"),m=o.memo((e=>{let{value:t,onUserInput:a,placeholder:r,className:o,align:c,fontSize:m="24px"}=e,h=(0,n.Z)(e,i);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("input",d({value:t,onChange:e=>{var t;(""===(t=e.target.value.replace(/,/g,".").replace(/%/g,""))||u.test((0,s.hr)(t)))&&Number(t)<=100&&a(t)},inputMode:"decimal",title:"Token Amount",autoComplete:"off",autoCorrect:"off",type:"text",pattern:"^[0-9]*$",placeholder:r||"100",maxLength:3,className:(0,s.AK)("right"===c&&"text-right","font-medium bg-transparent whitespace-nowrap overflow-ellipsis flex-auto",o),style:{fontSize:m}},h))})}));m.displayName="PercentInput",t.Z=m},39281:function(e,t,a){a.d(t,{Z:function(){return x}});var r=a(59499),n=a(4730),s=a(36325),o=a(67294),l=a(85893);const i=["value","onUserInput","placeholder","className","align","fontSize"];function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const u=o.memo((e=>{let{value:t,onUserInput:a,placeholder:r,className:o="flex w-full h-full p-3 font-bold rounded overflow-ellipsis recipient-address-input bg-dark-900 placeholder-low-emphesis",align:c,fontSize:u="24px"}=e,m=(0,n.Z)(e,i);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("input",d({value:t,onChange:e=>{a(e.target.value.replace(/\s+/g,""))},inputMode:"text",title:"Wallet Address or ENS name",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",placeholder:"Wallet Address or ENS name",pattern:"^(0x[a-fA-F0-9]{40})$",type:"text",className:(0,s.AK)("right"===c&&"text-right","font-medium bg-transparent whitespace-nowrap overflow-ellipsis flex-auto",o),style:{fontSize:u}},m))})}));u.displayName="AddressInput";var m=u,h=a(48410);var x={Address:m,Percent:a(23987).Z,Numeric:h.Z}},493:function(e,t,a){a.d(t,{Z:function(){return h}});var r=a(59499),n=a(26835),s=a(36325),o=a(52631),l=a(67294),i=a(73935),c=a(66441),d=a(85893);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h({content:e,children:t,placement:a="auto",show:r,modifiers:u}){const{0:h,1:x}=(0,l.useState)(null),{0:p,1:f}=(0,l.useState)(null),{0:g,1:v}=(0,l.useState)(null),{styles:b,update:w,attributes:j}=(0,c.D)(h,p,{placement:a,strategy:"fixed",modifiers:u||[{name:"offset",options:{offset:[0,8]}},{name:"arrow",options:{element:g}}]}),y=(0,l.useCallback)((()=>{w&&w()}),[w]);return(0,o.Z)(y,r?100:null),(0,d.jsx)(n.J,{as:l.Fragment,children:({open:a})=>(0,d.jsxs)(d.Fragment,{children:[l.Children.map(t,(e=>(0,d.jsx)(n.J.Button,{as:l.Fragment,ref:x,children:e}))),(null!==r&&void 0!==r?r:a)&&i.createPortal((0,d.jsxs)(n.J.Panel,m(m({static:!0,className:"z-1000 shadow-xl shadow-dark-1000/80 rounded overflow-hidden",ref:f,style:b.popper},j.popper),{},{children:[e,(0,d.jsx)("div",m({className:(0,s.AK)("w-2 h-2 z-50"),ref:v,style:b.arrow},j.arrow))]})),document.querySelector("#popover-portal"))]})})}},54962:function(e,t,a){a.d(t,{Z:function(){return i}});var r=a(63801),n=a(36325),s=a(67294);var o=a(70518),l=a(85893);var i=({className:e,children:t,text:a,icon:i=(0,l.jsx)(r.AV5,{width:14,height:14})})=>{const{0:c,1:d}=(0,s.useState)(!1),[u,m]=function(e=!1){const{0:t,1:a}=(0,s.useState)(e);return[t,(0,s.useCallback)((()=>a((e=>!e))),[])]}(!1),h=(0,s.useRef)(null);!function(e,t){const a=(0,s.useRef)(t);(0,s.useEffect)((()=>{a.current=t}),[t]),(0,s.useEffect)((()=>{const t=t=>{var r,n;null!==(r=null===(n=e.current)||void 0===n?void 0:n.contains(t.target))&&void 0!==r&&r||a.current&&a.current()};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}}),[e])}(h,u?m:void 0);const x=(0,s.useCallback)((()=>d(!0)),[d]),p=(0,s.useCallback)((()=>d(!1)),[d]);return t?(0,l.jsx)(o.ZP,{text:a,show:c||u,className:e,children:s.cloneElement(t,{ref:h,onClick:m,className:(0,n.AK)(t.props.className,"flex items-center justify-center w-full outline-none"),onMouseEnter:x,onMouseLeave:p})}):(0,l.jsx)(o.ZP,{text:a,show:c||u,className:e,children:(0,l.jsx)("div",{ref:h,onClick:m,className:"flex items-center justify-center ml-1 outline-none cursor-help hover:text-primary",onMouseEnter:x,onMouseLeave:p,children:i})})}},70518:function(e,t,a){a.d(t,{ZP:function(){return h},ud:function(){return x}});var r=a(59499),n=a(4730),s=a(36325),o=a(67294),l=a(493),i=a(85893);const c=["text","children","className"],d=["children"];function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e){let{text:t,children:a,className:r}=e,o=(0,n.Z)(e,c);return(0,i.jsx)(l.Z,m(m({placement:"bottom",content:(0,i.jsx)("div",{className:(0,s.AK)(r,"w-full max-w-[228px] px-3 py-2 font-bold bg-dark-900 border border-dark-700 rounded text-sm shadow-lg"),children:t})},o),{},{children:a}))}function x(e){let{children:t}=e,a=(0,n.Z)(e,d);const{0:r,1:s}=(0,o.useState)(!1),l=(0,o.useCallback)((()=>s(!0)),[s]),c=(0,o.useCallback)((()=>s(!1)),[s]);return(0,i.jsx)(h,m(m({},a),{},{show:r,children:(0,i.jsx)("div",{onMouseEnter:l,onMouseLeave:c,children:t})}))}},90281:function(e,t,a){a.d(t,{YN:function(){return ae},z5:function(){return ne},vr:function(){return ie},IJ:function(){return de},_S:function(){return ue},ed:function(){return he}});var r=a(84243),n=a(2593),s=a(16441),o=a(9279),l=a(71923),i=a(71862),c=a(47448),d=a(34545);let u;!function(e){e[e.DOWN=-1]="DOWN",e[e.FLAT=0]="FLAT",e[e.UP=1]="UP"}(u||(u={}));class m extends Array{add(e,t,a,r){return this.push({name:e,from:t,to:a,direction:r}),this}addTokenAmount(e,t,a,r){return this.add(e,(0,c.uf)(t.toFixed(r.tokenInfo.decimals))+" "+r.tokenInfo.symbol,(0,c.uf)(a.toFixed(r.tokenInfo.decimals))+" "+r.tokenInfo.symbol,t.eq(a)?u.FLAT:t.lt(a)?u.UP:u.DOWN),this}addUSD(e,t,a,r){return this.add(e,(0,c.uf)((0,d.Rm)(t,r),!0),(0,c.uf)((0,d.Rm)(a,r),!0),t.eq(a)?u.FLAT:t.lt(a)?u.UP:u.DOWN),this}addPercentage(e,t,a){return this.add(e,(0,c.T3)(t.toFixed(16)),(0,c.T3)(a.toFixed(16)),t.eq(a)?u.FLAT:t.lt(a)?u.UP:u.DOWN),this}addRate(e,t,a,r){return this.add(e,(0,c.uf)(t.toFixed(18+r.collateral.tokenInfo.decimals-r.asset.tokenInfo.decimals)),(0,c.uf)(a.toFixed(18+r.collateral.tokenInfo.decimals-r.asset.tokenInfo.decimals)),t.eq(a)?u.FLAT:t.lt(a)?u.UP:u.DOWN),this}}var h=a(59499);class x{constructor(e,t,a=!1,r){(0,h.Z)(this,"active",!1),(0,h.Z)(this,"message",""),(0,h.Z)(this,"breaking",!1),(0,h.Z)(this,"or",void 0),this.active=e,this.message=t,this.breaking=a,this.or=r}}class p extends Array{_add(e){e.active?this.push(e):e.or&&this._add(e.or)}add(e,t,a=!1,r){return this._add(new x(e,t,a,r)),this}addWarning(e,t,a){return this._add(new x(e,t,!1,a)),this}addError(e,t,a){return this._add(new x(e,t,!0,a)),this}get broken(){return this.some((e=>e.breaking))}}var f=a(98765),g=a(11324),v=a(60708),b=a(40588),w=a(62483),j=a(56388),y=a(12614),N=a(16339),k=a(37643),A=a(627),B=a(98950),P=a(67294),O=a(85169),I=a(98332),E=a(15097),Z=a(27262),D=a(42388),S=a(85893);function C({content:e,color:t}){const{i18n:a}=(0,O.mV)(),[r,n,s,o,l]=(0,D.ZP)(),c=(r===D.kG.NOT_APPROVED||r===D.kG.PENDING)&&!s,d=r===D.kG.APPROVED||s;return(0,S.jsxs)(S.Fragment,{children:[n&&(0,S.jsx)(I.Z,{message:a._(a._("Something went wrong during signing of the approval. This is expected for hardware wallets, such as Trezor and Ledger. Click again and the fallback method will be used")),className:"mb-4"}),c&&(0,S.jsx)(i.ZP,{color:t,onClick:o,className:"mb-4",fullWidth:!0,children:a._(a._("Approve Kashi"))}),d&&P.cloneElement(e(l),{color:t})]})}function R({children:e,value:t,token:a,needed:r,color:n}){const{i18n:s}=(0,O.mV)(),{chainId:o}=(0,y.a)(),[c,d]=(0,Z.qL)((0,v.e)(t,a),o?l.OI[o]:void 0);return o&&a&&a.address!==l.df[o]&&r&&t&&(c===Z.UK.NOT_APPROVED||c===Z.UK.PENDING)?(0,S.jsx)(i.ZP,{color:n,onClick:d,className:"mb-4",fullWidth:!0,children:c===Z.UK.PENDING?(0,S.jsx)(E.Z,{children:"Approving ".concat(a.symbol)}):(0,S.jsxs)(S.Fragment,{children:[s._(s._("Approve"))," ",a.symbol]})}):P.cloneElement(e,{color:n})}var _=a(92552),T=a(54962),U=a(94492),F=a(67801);function M({title:e,color:t,swap:a,setSwap:r,help:n,trade:s}){const o=(0,F.Z)(s);return(0,S.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,S.jsxs)("div",{className:"flex",children:[(0,S.jsx)(_.Z,{color:t,checked:a,set:r}),(0,S.jsx)("span",{className:"ml-2 mr-1 text-primary",children:e}),(0,S.jsx)(T.Z,{text:n})]}),a&&(0,S.jsx)(U.Z,{placeholderSlippage:o})]})}var L=a(81589),z=a(46271),V=a(39281);function W({color:e="blue",token:t,value:a,setValue:r,useBentoTitleDirection:n="down",useBentoTitle:s="",useBento:o,setUseBento:l,maxTitle:d="Max",max:u,pinMax:m=!1,setPinMax:h,showMax:x=!1,disabled:p=!1,switchDisabled:f=!1}){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"flex items-center justify-between my-4",children:[(0,S.jsxs)("div",{className:"flex items-center text-base text-secondary",children:[(0,S.jsx)("span",{children:"down"==n?(0,S.jsx)(L.Z,{size:"1rem",style:{display:"inline"}}):(0,S.jsx)(z.Z,{size:"1rem",style:{display:"inline"}})}),(0,S.jsx)("span",{className:"mx-2",children:s}),(0,S.jsx)("span",{children:(0,S.jsx)(i.ZP,{variant:"outlined",size:"xs",color:e,className:"disabled:cursor-not-allowed focus:ring focus:ring-"+e,onClick:()=>{l(!o)},disabled:f,children:o?"BentoBox":"Wallet"})})]}),(0,S.jsxs)("div",{className:"text-base text-right text-secondary",style:{display:"inline",cursor:"pointer"},children:[d," ",(0,c.uf)(u.toFixed(t.tokenInfo.decimals))]})]}),(0,S.jsxs)("div",{className:"relative flex items-center w-full mb-4",children:[(0,S.jsx)(V.Z.Numeric,{className:"w-full p-3 bg-dark-700 rounded disabled:cursor-not-allowed disabled:bg-dark-1000 disabled:ring disabled:ring-dark-800 focus:ring focus:ring-"+e,value:a,onUserInput:r,onFocus:()=>{m&&r(""),h&&h(!1)},disabled:p}),x&&u.gt(0)&&(0,S.jsx)(i.ZP,{variant:"outlined",size:"xs",color:e,onClick:()=>{h?h(!0):r(u.toFixed(t.tokenInfo.decimals))},className:"absolute right-4 focus:ring focus:ring-"+e,children:"MAX"})]})]})}var q=a(56785);const G={0:"",1:"text-high-emphesis",2:"text-yellow",3:"text-red",4:"text-red"};var K=({priceImpact:e})=>(0,S.jsx)(q.Z,{variant:"sm",className:G[(0,b.oX)(e)],children:e?"".concat(e.multiply(-1).toFixed(2),"%"):"-"}),Y=a(63801),$=a(24678);const X=(0,P.memo)((({trade:e})=>(0,S.jsx)("div",{className:"flex flex-wrap items-center justify-end",children:e.route.path.map(((e,t,a)=>{const r=t===a.length-1,n=(0,$.B)(e);return(0,S.jsxs)(P.Fragment,{children:[(0,S.jsx)("div",{className:"flex space-x-2 flex-end",children:(0,S.jsx)("div",{className:"text-sm font-bold text-high-emphesis",children:n.symbol})}),r?null:(0,S.jsx)(Y.XCv,{width:12,height:12})]},t)}))})));X.displayName="SwapRoute";var H=X;var J=function({trade:e,allowedSlippage:t}){var a,r;const{i18n:n}=(0,O.mV)(),s=Boolean(e&&e.route.path.length>2),{realizedLPFee:o,priceImpact:l}=(0,P.useMemo)((()=>{if(!e)return{realizedLPFee:void 0,priceImpact:void 0};const t=(0,b.GS)(e),a=e.inputAmount.multiply(t);return{priceImpact:e.priceImpact.subtract(t),realizedLPFee:a}}),[e]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"text-xl text-high-emphesis",children:"Swap Review"}),e?(0,S.jsxs)("div",{className:"py-4 mb-4",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{className:"flex text-lg text-secondary",children:[n._(n._("Minimum received")),(0,S.jsx)(T.Z,{text:n._(n._("Your transaction will revert if there is a large, unfavorable price movement before it is confirmed."))})]}),(0,S.jsx)("div",{className:"text-lg",children:null!==(a="".concat(null===(r=e.minimumAmountOut(t))||void 0===r?void 0:r.toSignificant(4)," ").concat(e.outputAmount.currency.symbol))&&void 0!==a?a:"-"})]}),(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{className:"flex text-lg text-secondary",children:[n._(n._("Price Impact")),(0,S.jsx)(T.Z,{text:n._(n._("The difference between the market price and estimated price due to trade size."))})]}),(0,S.jsx)("div",{className:"text-lg",children:(0,S.jsx)(K,{priceImpact:l})})]}),(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{className:"flex text-lg text-secondary",children:["Liquidity Provider Fee",(0,S.jsx)(T.Z,{text:n._(n._("A portion of each trade (0.25%) goes to liquidity providers as a protocol incentive."))})]}),(0,S.jsx)("div",{className:"text-lg",children:o?"".concat(o.toSignificant(4)," ").concat(e.inputAmount.currency.symbol):"-"})]}),s&&(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{className:"flex text-lg text-secondary",children:[n._(n._("Route")),(0,S.jsx)(T.Z,{text:n._(n._("Routing through these tokens resulted in the best price for your trade."))})]}),(0,S.jsx)("div",{className:"text-lg",children:(0,S.jsx)(H,{trade:e})})]})]}):(0,S.jsx)("div",{className:"mb-4 text-lg text-secondary",children:n._(n._("No liquidity found to do swap"))})]})},Q=a(45169);var ee=function({transactionReview:e}){return(0,S.jsx)(S.Fragment,{children:e&&e.length>0&&(0,S.jsxs)("div",{className:"py-4 mb-4",children:[(0,S.jsx)("div",{className:"text-xl text-high-emphesis",children:"Transaction Review"}),e.map(((e,t)=>(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{className:"text-lg text-secondary",children:[e.name,":"]}),(0,S.jsxs)("div",{className:"text-lg",children:[e.from,e.direction===u.FLAT?(0,S.jsx)(Q.Z,{size:"1rem",style:{display:"inline",marginRight:"6px",marginLeft:"6px"}}):e.direction===u.UP?(0,S.jsx)(z.Z,{size:"1rem",style:{display:"inline",marginRight:"6px",marginLeft:"6px"}}):(0,S.jsx)(L.Z,{size:"1rem",style:{display:"inline",marginRight:"6px",marginLeft:"6px"}}),e.to]})]},t)))]})})};var te=function({warnings:e}){return(0,S.jsx)(S.Fragment,{children:e.map(((e,t)=>(0,S.jsx)(I.Z,{type:e.breaking?"error":"warning",message:e.message,className:"mb-4"},t)))})};function ae({pair:e}){var t;const{account:a,chainId:c}=(0,y.a)(),{0:d,1:u}=(0,P.useState)(e.collateral.bentoBalance.gt(0)),{0:h,1:O}=(0,P.useState)(!0),{0:I,1:E}=(0,P.useState)(""),{0:Z,1:D}=(0,P.useState)(""),{0:_,1:T}=(0,P.useState)(""),{0:U,1:F}=(0,P.useState)(true),{0:L,1:z}=(0,P.useState)(!1),V=(0,w.U8)(e.asset.address)||void 0,q=(0,w.U8)(e.collateral.address)||void 0,G=l.FX[c].address===e.collateral.address,K=(0,B.AE)(G?[a]:[]),Y=d?e.collateral.bentoBalance:G?n.O$.from((null===(t=K[a])||void 0===t?void 0:t.quotient.toString())||0):e.collateral.balance,$=!e.currentExchangeRate.gt(0)||U,X=(0,N.C)(k.tE),H=(0,v.e)(Z,V),Q=(0,j.w)(H,q),{realizedLPFee:ae,priceImpact:re}=(0,P.useMemo)((()=>{if(!Q)return{realizedLPFee:void 0,priceImpact:void 0};const e=(0,b.GS)(Q),t=Q.inputAmount.multiply(e);return{priceImpact:Q.priceImpact.subtract(e),realizedLPFee:t}}),[Q]),ne=L&&Q?n.O$.from(Q.minimumAmountOut(X).quotient.toString()):g.xE,se=I.toBigNumber(e.collateral.tokenInfo.decimals),oe=e.userCollateralAmount.value.add(I.toBigNumber(e.collateral.tokenInfo.decimals)).add(ne),le=oe.mulDiv((0,g.TB)(16).mul("75"),e.oracleExchangeRate),ie=oe.mulDiv((0,g.TB)(16).mul("75"),e.spotExchangeRate),ce=oe.mulDiv((0,g.TB)(16).mul("75"),$?e.oracleExchangeRate:e.currentExchangeRate),de=(0,g.LT)(le,ie,ce),ue=de.mulDiv("95","100").sub(e.currentUserBorrowAmount.value),me=(0,g.gW)((0,g.LT)(ue,e.maxAssetAvailable),g.xE),he=(me.toFixed(e.asset.tokenInfo.decimals),e.currentUserBorrowAmount.value.add(Z.toBigNumber(e.asset.tokenInfo.decimals))),xe=he.mulDiv("1000000000000000000",de),pe=!I.toBigNumber(e.collateral.tokenInfo.decimals).isZero(),fe=!Z.toBigNumber(e.asset.tokenInfo.decimals).isZero(),ge=L&&fe?Q:void 0,[ve]=(0,A.DG)(),be=(0,b.oX)(re),we=Z.toBigNumber(e.asset.tokenInfo.decimals),je=new p;je.add(null===Y||void 0===Y?void 0:Y.lt(I.toBigNumber(e.collateral.tokenInfo.decimals)),"Please make sure your ".concat(d?"BentoBox":"wallet"," balance is sufficient to deposit and then try again."),!0);const ye=(new p).add(de.lt(e.currentUserBorrowAmount.value),"You have surpassed your borrow limit and may be liquidated at any moment. Repay now or add collateral!",!0,new x(ue.lt(0),"You have surpassed your borrow limit and assets are at a high risk of liquidation.",!0,new x(Z.length>0&&we.gt(de.sub(e.currentUserBorrowAmount.value)),"You don't have enough collateral to borrow this amount.",!0,new x(Z.length>0&&we.gt(ue),"You will surpass your borrow limit and assets will be at a high risk of liquidation.",!1)))).add(Z.length>0&&e.maxAssetAvailable.lt(Z.toBigNumber(e.asset.tokenInfo.decimals)),"Not enough liquidity in this pair.",!0),Ne=new m;!I&&!Z||je.broken||ye.broken&&Z||(pe&&(Ne.addTokenAmount("Collateral",e.userCollateralAmount.value,oe,e.collateral),Ne.addUSD("Collateral USD",e.userCollateralAmount.value,oe,e.collateral)),fe&&(Ne.addTokenAmount("Borrowed",e.currentUserBorrowAmount.value,he,e.asset),Ne.addUSD("Borrowed USD",e.currentUserBorrowAmount.value,he,e.asset)),$&&Ne.addRate("Exchange Rate",e.currentExchangeRate,e.oracleExchangeRate,e),Ne.addTokenAmount("Borrow Limit",e.maxBorrowable.safe.value,ue.sub(Z.toBigNumber(e.asset.tokenInfo.decimals)),e.asset),Ne.addPercentage("Limit Used",e.health.value,xe),Ne.addPercentage("Borrow APR",e.interestPerYear.value,e.currentInterestPerYear.value));let ke="Nothing to do";pe?ke=fe?ge?"Borrow, swap and add collateral":"Add collateral and borrow":"Add collateral":fe&&(ke=ge?"Borrow, swap and add as collateral":"Borrow"),L&&be>3&&!ve?ke="Price Impact High":L&&be>2&&(ke+=" anyway");const Ae=I.toBigNumber(e.collateral.tokenInfo.decimals).lte(0)&&Z.toBigNumber(e.asset.tokenInfo.decimals).lte(0)||je.broken||Z.length>0&&ye.broken||L&&be>3&&!ve||e.userCollateralAmount.value.isZero()&&!pe;async function Be(t){let i="";if(fe&&($&&t.updateExchangeRate(!0,g.xE,g.xE),L&&!d&&t.bentoDepositCollateral(I.toBigNumber(e.collateral.tokenInfo.decimals)),t.borrow(Z.toBigNumber(e.asset.tokenInfo.decimals),L||h,L?l.B9[c||1]:"")),fe&&ge){const n=ge.route.path.map((e=>e.address))||[];if(n.length>4)throw"Path too long";console.log("debug",[e.asset.address,e.collateral.address,ne,n.length>2?n[1]:o.d,n.length>3?n[2]:o.d,a,(0,f.To)(e.collateral,I.toBigNumber(e.collateral.tokenInfo.decimals)),Z.toBigNumber(e.asset.tokenInfo.decimals)]);const i=r.$.encode(["address","address","uint256","address","address","address","uint256"],[e.asset.address,e.collateral.address,ne,n.length>2?n[1]:o.d,n.length>3?n[2]:o.d,a,(0,f.To)(e.collateral,I.toBigNumber(e.collateral.tokenInfo.decimals))]);t.action(l.B9[c||1],g.xE,(0,s.xs)([(0,s.Dv)("0x3087d742"),i]),!1,!0,1)}return pe&&t.addCollateral(L?n.O$.from(-1):I.toBigNumber(e.collateral.tokenInfo.decimals),d||L),pe?i=fe?ge?"Borrow, swap and add collateral":"Add collateral and borrow":"Add collateral":fe&&(i=ge?"Borrow, swap and add as collateral":"Borrow"),i}return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"mt-6 mb-4 text-3xl text-high-emphesis",children:["Borrow ",e.asset.tokenInfo.symbol]}),(0,S.jsx)(W,{color:"pink",token:e.collateral,value:I,setValue:E,useBentoTitleDirection:"down",useBentoTitle:"Add ".concat(e.collateral.tokenInfo.symbol," collateral from"),useBento:d,setUseBento:u,maxTitle:"Balance",max:Y,showMax:!0}),(0,S.jsx)(W,{color:"pink",token:e.asset,value:Z,setValue:D,useBentoTitleDirection:"up",useBentoTitle:"Borrow ".concat(e.asset.tokenInfo.symbol," to"),useBento:h,setUseBento:O,maxTitle:"Max",max:me}),pe&&(0,S.jsx)(M,{trade:ge,color:"pink",swap:L,setSwap:z,title:"Swap borrowed ".concat(e.asset.tokenInfo.symbol," for ").concat(e.collateral.tokenInfo.symbol," collateral"),help:"Swapping your borrowed tokens for collateral allows for opening long/short positions with leverage in a single transaction."}),pe&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{className:"flex mb-4",children:["0.25","0.5","0.75","1","1.25","1.5","1.75","2.0"].map(((t,a)=>(0,S.jsxs)(i.ZP,{variant:"outlined",size:"xs",color:"pink",onClick:()=>{!function(t){const a=se.add(se.mulDiv(t.toBigNumber(e.collateral.tokenInfo.decimals),"1".toBigNumber(e.collateral.tokenInfo.decimals))).mulDiv((0,g.TB)(16).mul("75"),e.currentExchangeRate);D(a.toFixed(e.asset.tokenInfo.decimals))}(t),z(!0)},className:"mr-4 text-md focus:ring-pink",children:[t,"x"]},a)))})}),(0,S.jsx)(te,{warnings:je}),(0,S.jsx)(te,{warnings:ye}),L&&ge&&(0,S.jsx)(J,{trade:ge,allowedSlippage:X}),(pe||fe&&!e.userCollateralAmount.value.isZero()||L&&(be<3||ve))&&(0,S.jsx)(ee,{transactionReview:Ne}),(0,S.jsx)(C,{color:"pink",content:t=>(0,S.jsx)(R,{value:I,token:q,needed:!d,children:(0,S.jsx)(i.ZP,{onClick:()=>t(e,Be),disabled:Ae,fullWidth:!0,children:ke})})})]})}var re=a(83304);function ne({pair:e}){var t,a;const{account:r,chainId:s}=(0,y.a)(),o=(0,w.U8)(e.asset.address)||void 0,d=(0,re.rO)(),{i18n:h}=(0,O.mV)(),{0:x,1:f}=(0,P.useState)(e.asset.bentoBalance.gt(0)),{0:v,1:b}=(0,P.useState)(""),j=l.FX[s].address===e.asset.address,N=(0,B.AE)(j?[r]:[]),k=x?e.asset.bentoBalance:j?n.O$.from((null===(t=N[r])||void 0===t?void 0:t.quotient.toString())||0):e.asset.balance,A=x?e.asset.bentoBalance:j?n.O$.from((null===(a=N[r])||void 0===a?void 0:a.quotient.toString())||0):e.asset.balance,I=new p;I.add(null===k||void 0===k?void 0:k.lt(v.toBigNumber(e.asset.tokenInfo.decimals)),h._(h._("Please make sure your {0} balance is sufficient to deposit and then try again.",{0:x?"BentoBox":"wallet"})),!0);const E=new m;if(v&&!I.broken){const t=v.toBigNumber(e.asset.tokenInfo.decimals),a=e.currentUserAssetAmount.value.add(t);E.addTokenAmount(h._(h._("Balance")),e.currentUserAssetAmount.value,a,e.asset),E.addUSD(h._(h._("Balance USD")),e.currentUserAssetAmount.value,a,e.asset);const r=(0,g.TB)(18).mulDiv(e.currentBorrowAmount.value,e.currentAllAssets.value.add(t));E.addPercentage(h._(h._("Borrowed")),e.utilization.value,r),e.currentExchangeRate.isZero()&&E.add("Exchange Rate",(0,c.uf)(e.currentExchangeRate.toFixed(18+e.collateral.tokenInfo.decimals-e.asset.tokenInfo.decimals)),(0,c.uf)(e.oracleExchangeRate.toFixed(18+e.collateral.tokenInfo.decimals-e.asset.tokenInfo.decimals)),u.UP),E.addPercentage(h._(h._("Supply APR")),e.supplyAPR.value,e.currentSupplyAPR.value)}async function Z(t){e.currentExchangeRate.isZero()&&t.updateExchangeRate(!1,g.xE,g.xE);const a=v.toBigNumber(e.asset.tokenInfo.decimals),r=await d.balanceOf(e.asset.address,"0x000000000000000000000000000000000000dead");return t.addAsset(a,x,r.isZero()),"".concat(h._(h._("Deposit"))," ").concat(e.asset.tokenInfo.symbol)}return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"mt-6 text-3xl text-high-emphesis",children:["Deposit ",e.asset.tokenInfo.symbol]}),(0,S.jsx)(W,{color:"blue",token:e.asset,value:v,setValue:b,useBentoTitleDirection:"down",useBentoTitle:"from",useBento:x,setUseBento:f,maxTitle:"Balance",max:A,showMax:!0}),(0,S.jsx)(te,{warnings:I}),(0,S.jsx)(ee,{transactionReview:E}),(0,S.jsx)(C,{color:"blue",content:t=>(0,S.jsx)(R,{value:v,token:o,needed:!x,children:(0,S.jsx)(i.ZP,{onClick:()=>t(e,Z),disabled:v.toBigNumber(e.asset.tokenInfo.decimals).lte(0)||I.broken,fullWidth:!0,children:h._(h._("Deposit"))})})})]})}var se=a(81793),oe=a(82039),le=a(36325);function ie({pair:e}){const[,,,,t]=(0,D.ZP)();async function a(t){return t.updateExchangeRate(!1,g.xE,g.xE),"".concat(se.ag._(se.ag._("Update Price"))," ").concat(e.asset.tokenInfo.symbol,"/").concat(e.collateral.tokenInfo.symbol)}async function r(t){return t.add(oe.yJ,"0x00"),"".concat(se.ag._(se.ag._("Accrue"))," ").concat(e.asset.tokenInfo.symbol,"/").concat(e.collateral.tokenInfo.symbol)}const n=(0,P.useMemo)((()=>{const t=(null===e||void 0===e?void 0:e.currentExchangeRate)/1e18,a=(null===e||void 0===e?void 0:e.oracleExchangeRate)/1e18;return Math.abs(t-a)/t*100}),[e]);return(0,S.jsxs)("div",{className:"flex flex-row flex-shrink space-x-2",children:[(0,S.jsx)(T.Z,{text:"Sync Market APR to Supply APR",children:(0,S.jsx)(i.ZP,{color:"gradient",variant:"outlined",size:"xs",className:"w-full",onClick:()=>t(e,r),children:"Accrue"})}),(0,S.jsx)(T.Z,{text:(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{children:"Update the exchange rate"}),(0,S.jsxs)("div",{children:["Current deviation: ",(0,le.T3)(n)]})]}),children:(0,S.jsx)(i.ZP,{color:"gradient",variant:"outlined",size:"xs",className:"w-full",onClick:()=>t(e,a),children:"Update Price"})})]})}const ce=new l.gG(5,100);function de({pair:e}){var t;const{account:a,chainId:c}=(0,y.a)(),{0:d,1:u}=(0,P.useState)(e.asset.bentoBalance.gt(0)),{0:h,1:O}=(0,P.useState)(!0),{0:I,1:E}=(0,P.useState)(""),{0:Z,1:D}=(0,P.useState)(""),{0:_,1:T}=(0,P.useState)(!1),{0:U,1:F}=(0,P.useState)(!1),{0:L,1:z}=(0,P.useState)(true),{0:V,1:q}=(0,P.useState)(!1),G=(0,w.U8)(e.asset.address)||void 0,K=(0,w.U8)(e.collateral.address)||void 0,Y=l.FX[c||1].address===e.asset.address,$=(0,B.AE)(Y?[a]:[]);console.log({pair:e});const X=d?(0,f.sN)(e.asset,e.asset.bentoBalance):Y?n.O$.from((null===(t=$[a])||void 0===t?void 0:t.quotient.toString())||0):e.asset.balance,H=!e.currentExchangeRate.gt(0)||L,Q=U?(0,g.LT)(e.currentUserBorrowAmount.value,X).toFixed(e.asset.tokenInfo.decimals):I,ae=e.currentUserBorrowAmount.value.sub(Q.toBigNumber(e.asset.tokenInfo.decimals)),re=ae.mulDiv(e.oracleExchangeRate,(0,g.TB)(16).mul("75")),ne=ae.mulDiv(e.spotExchangeRate,(0,g.TB)(16).mul("75")),se=ae.mulDiv(H?e.oracleExchangeRate:e.currentExchangeRate,(0,g.TB)(16).mul("75")),oe=(0,g.gW)(re,ne,se),le=(0,g.gW)(e.userCollateralAmount.value.sub(oe.mul(100).div(95)),g.xE),ie=le.toFixed(e.collateral.tokenInfo.decimals),de=_?ie:Z,ue=(0,N.C)((0,k.yr)(ce)),me=(0,v.e)(e.currentUserBorrowAmount.string,G),he=(0,j.k)(K,me)||void 0,{realizedLPFee:xe,priceImpact:pe}=(0,P.useMemo)((()=>{if(!he)return{realizedLPFee:void 0,priceImpact:void 0};const e=(0,b.GS)(he),t=he.inputAmount.multiply(e);return{priceImpact:he.priceImpact.subtract(e),realizedLPFee:t}}),[he]),fe=V&&he?he.maximumAmountIn(ue).toFixed(e.collateral.tokenInfo.decimals).toBigNumber(e.collateral.tokenInfo.decimals):g.xE,ge=e.userCollateralAmount.value.sub(de.toBigNumber(e.collateral.tokenInfo.decimals)),ve=ge.mulDiv((0,g.TB)(16).mul("75"),e.oracleExchangeRate),be=ge.mulDiv((0,g.TB)(16).mul("75"),e.spotExchangeRate),we=ge.mulDiv((0,g.TB)(16).mul("75"),H?e.oracleExchangeRate:e.currentExchangeRate),je=(0,g.LT)(ve,be,we),ye=je.mulDiv("95","100").sub(e.currentUserBorrowAmount.value),Ne=((0,g.gW)((0,g.LT)(ye,e.maxAssetAvailable),g.xE),e.currentUserBorrowAmount.value.sub(Q.toBigNumber(e.asset.tokenInfo.decimals)).mulDiv(n.O$.from("1000000000000000000"),je)),ke=new m;(Q||de)&&(ke.addTokenAmount("Borrow Limit",e.maxBorrowable.safe.value,ye.add(Q.toBigNumber(e.asset.tokenInfo.decimals)),e.asset),ke.addPercentage("Health",e.health.value,Ne));const Ae=(new p).addError(Y&&!d&&U,"You cannot MAX repay ".concat(e.asset.tokenInfo.symbol," directly from your wallet. Please deposit your ").concat(e.asset.tokenInfo.symbol," into the BentoBox first, then repay. Because your debt is slowly accrueing interest we can't predict how much it will be once your transaction gets mined.")).addError(de.toBigNumber(e.collateral.tokenInfo.decimals).gt(e.userCollateralAmount.value),"You have insufficient collateral. Please enter a smaller amount or repay more.").addError(Q.toBigNumber(e.asset.tokenInfo.decimals).gt(e.currentUserBorrowAmount.value),"You can't repay more than you owe. To fully repay, please click the 'max' button.",new x(null===X||void 0===X?void 0:X.lt(Q.toBigNumber(e.asset.tokenInfo.decimals)),"Please make sure your ".concat(d?"BentoBox":"wallet"," balance is sufficient to repay and then try again."),!0)).addError(de.toBigNumber(e.collateral.tokenInfo.decimals).gt((0,g.gW)(e.userCollateralAmount.value.sub(oe),g.xE)),"Removing this much collateral would put you into insolvency.",new x(de.toBigNumber(e.collateral.tokenInfo.decimals).gt(le),"Removing this much collateral would put you very close to insolvency.")),Be=!de.toBigNumber(e.collateral.tokenInfo.decimals).isZero()||_&&e.userCollateralShare.gt(g.xE),Pe=!Q.toBigNumber(e.asset.tokenInfo.decimals).isZero(),[Oe]=(0,A.DG)(),Ie=(0,b.oX)(pe);let Ee="Nothing to do";Be?Ee=Pe?"Repay and remove collateral":"Remove collateral":Pe?Ee="Repay":V&&(Ee="Automatic repay");const Ze=!V&&!he&&Q.toBigNumber(e.asset.tokenInfo.decimals).lte(0)&&de.toBigNumber(e.collateral.tokenInfo.decimals).lte(0)&&(!_||e.userCollateralShare.isZero())||Ae.some((e=>e.breaking));function De(){F(!1),T(!1),D(""),E("")}async function Se(t){let i="";if(V&&he){(0,f.To)(e.collateral,e.userCollateralAmount.value);t.removeCollateral(e.userCollateralShare,!0),t.bentoTransferCollateral(e.userCollateralShare,l.XX[c||1]),t.repayShare(e.userBorrowPart);const d=he.route.path.map((e=>e.address))||[];console.log("debug",[e.collateral.address,e.asset.address,fe,d.length>2?d[1]:o.d,d.length>3?d[2]:o.d,a,e.userCollateralShare]);const u=r.$.encode(["address","address","uint256","address","address","address","uint256"],[e.collateral.address,e.asset.address,fe,d.length>2?d[1]:o.d,d.length>3?d[2]:o.d,a,e.userCollateralShare]);t.action(l.XX[c||1],g.xE,(0,s.xs)([(0,s.Dv)("0x3087d742"),u]),!0,!1,1),t.repayPart(e.userBorrowPart,!0),h||t.bentoWithdrawCollateral(g.xE,n.O$.from(-1)),i="Repay All"}else if(U&&e.userBorrowPart.gt(0)&&X.gte(e.currentUserBorrowAmount.value)?(t.repayPart(e.userBorrowPart,d),i="Repay Max"):Q.toBigNumber(e.asset.tokenInfo.decimals).gt(0)&&(t.repay(Q.toBigNumber(e.asset.tokenInfo.decimals),d),i="Repay"),de.toBigNumber(e.collateral.tokenInfo.decimals).gt(0)||_&&e.userCollateralShare.gt(0)){const a=_&&(ae.isZero()||U&&e.userBorrowPart.gt(0)&&X.gte(e.currentUserBorrowAmount.value))?e.userCollateralShare:(0,f.To)(e.collateral,de.toBigNumber(e.collateral.tokenInfo.decimals));t.removeCollateral(a,h),i+=(i?" and ":"")+"Remove Collateral"}return De(),i}return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"mt-6 mb-4 text-3xl text-high-emphesis",children:["Repay ",e.asset.tokenInfo.symbol]}),(0,S.jsx)(W,{color:"pink",token:e.asset,value:Q,setValue:E,useBentoTitleDirection:"down",useBentoTitle:"Repay ".concat(e.asset.tokenInfo.symbol," from"),useBento:d,setUseBento:u,maxTitle:"Balance",max:X,pinMax:U,setPinMax:F,showMax:!V&&!e.currentUserBorrowAmount.value.isZero(),disabled:V||e.currentUserBorrowAmount.value.isZero(),switchDisabled:V||e.currentUserBorrowAmount.value.isZero()}),(0,S.jsx)(W,{color:"pink",token:e.collateral,value:de,setValue:D,useBentoTitleDirection:"up",useBentoTitle:"Remove ".concat(e.collateral.tokenInfo.symbol," to"),useBento:h,setUseBento:O,max:le,pinMax:_,setPinMax:T,showMax:e.currentUserBorrowAmount.value.eq(Q.toBigNumber(e.asset.tokenInfo.decimals))||e.currentUserBorrowAmount.value.isZero(),disabled:V||e.userCollateralAmount.value.isZero(),switchDisabled:e.userCollateralAmount.value.isZero()}),!e.currentUserBorrowAmount.value.isZero()&&(0,S.jsx)(M,{trade:he,color:"pink",swap:V,setSwap:e=>{De(),q(e)},title:"Swap ".concat(e.collateral.tokenInfo.symbol," collateral for ").concat(e.asset.tokenInfo.symbol," and repay"),help:"Swapping your removed collateral tokens and repay allows for reducing your borrow by using your collateral and/or to unwind leveraged positions."}),(0,S.jsx)(te,{warnings:Ae}),V&&he&&(0,S.jsx)(J,{trade:he,allowedSlippage:ue}),V&&(Ie<3||Oe)&&(0,S.jsx)(ee,{transactionReview:ke}),(0,S.jsx)(C,{color:"pink",content:t=>(0,S.jsx)(R,{value:Q,token:G,needed:!d,children:(0,S.jsx)(i.ZP,{onClick:()=>t(e,Se),disabled:Ze,fullWidth:!0,children:Ee})})})]})}function ue({token:e}){const{harvest:t}=(0,re.x7)();return(0,S.jsx)(S.Fragment,{children:e.strategy&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"flex justify-between",children:[(0,S.jsxs)("div",{className:"flex flex-row",children:[(0,S.jsx)("div",{className:"text-lg text-secondary",children:se.ag._(se.ag._("Avg. APY"))}),(0,S.jsx)(T.Z,{text:"Might be lower on the pair specifically depending on it's utilization"})]}),(0,S.jsx)("div",{className:"flex items-center",children:(0,S.jsx)("div",{className:"text-lg text-high-emphesis",children:(0,le.T3)(e.strategy.apy)})})]}),(0,S.jsxs)("div",{className:"flex justify-between",children:[(0,S.jsx)("div",{className:"text-lg text-secondary",children:se.ag._(se.ag._("Target Percentage"))}),(0,S.jsx)("div",{className:"flex items-center",children:(0,S.jsx)("div",{className:"text-lg text-high-emphesis",children:(0,le.T3)(e.strategy.targetPercentage)})})]}),(0,S.jsxs)("div",{className:"flex justify-between",children:[(0,S.jsx)("div",{className:"text-lg text-secondary",children:se.ag._(se.ag._("Current Percentage"))}),(0,S.jsx)("div",{className:"flex items-center",children:(0,S.jsx)("div",{className:"text-lg text-high-emphesis",children:(0,le.T3)(e.strategy.utilization)})})]}),(0,S.jsx)("div",{className:"flex flex-row space-x-2",children:(0,S.jsx)(i.ZP,{color:"gradient",variant:"outlined",size:"xs",className:"w-full",onClick:()=>t(e.address,!0),children:"Rebalance"})})]})})}var me=a(90849);function he({pair:e}){const{account:t}=(0,y.a)(),{i18n:a}=((0,me.Fw)(),(0,O.mV)()),{0:r,1:n}=(0,P.useState)(e.asset.bentoBalance.gt(0)),{0:s,1:o}=(0,P.useState)(""),{0:l,1:c}=(0,P.useState)(!1),[d,u,h,x,f]=(0,D.ZP)(),v=(0,g.LT)(e.maxAssetAvailable,e.currentUserAssetAmount.value),b=l?v.toFixed(e.asset.tokenInfo.decimals):s,w=l?(0,g.LT)(e.userAssetFraction,e.maxAssetAvailableFraction):s.toBigNumber(e.asset.tokenInfo.decimals).mulDiv(e.currentTotalAsset.base,e.currentAllAssets.value),j=(new p).add(e.currentUserAssetAmount.value.lt(s.toBigNumber(e.asset.tokenInfo.decimals)),a._(a._("Please make sure your {0} balance is sufficient to withdraw and then try again.",{0:r?"BentoBox":"wallet"})),!0).add(e.maxAssetAvailableFraction.lt(w),a._(a._("The isn't enough liquidity available at the moment to withdraw this amount. Please try withdrawing less or later.")),!0),N=new m;if(b&&!j.broken){const t=b.toBigNumber(e.asset.tokenInfo.decimals),r=e.currentUserAssetAmount.value.sub(t);N.addTokenAmount(a._(a._("Balance")),e.currentUserAssetAmount.value,r,e.asset),N.addUSD(a._(a._("Balance USD")),e.currentUserAssetAmount.value,r,e.asset);const n=(0,g.TB)(18).mulDiv(e.currentBorrowAmount.value,e.currentAllAssets.value.sub(t));N.addPercentage(a._(a._("Borrowed")),e.utilization.value,n)}async function k(t){const n=l?(0,g.LT)(e.userAssetFraction,e.maxAssetAvailableFraction):s.toBigNumber(e.asset.tokenInfo.decimals).mulDiv(e.currentTotalAsset.base,e.currentAllAssets.value);return t.removeAsset(n,r),"".concat(a._(a._("Withdraw"))," ").concat(e.asset.tokenInfo.symbol)}return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"mt-6 text-3xl text-high-emphesis",children:[a._(a._("Withdraw"))," ",e.asset.tokenInfo.symbol]}),(0,S.jsx)(W,{color:"blue",token:e.asset,value:b,setValue:o,useBentoTitleDirection:"up",useBentoTitle:"to",useBento:r,setUseBento:n,max:v,pinMax:l,setPinMax:c,showMax:!0}),(0,S.jsx)(te,{warnings:j}),(0,S.jsx)(ee,{transactionReview:N}),(0,S.jsx)(C,{color:"blue",content:t=>(0,S.jsx)(i.ZP,{onClick:()=>t(e,k),disabled:b.toBigNumber(e.asset.tokenInfo.decimals).lte(0)||j.broken,fullWidth:!0,children:a._(a._("Withdraw"))})})]})}},87433:function(e,t,a){var r=a(85169),n=a(71923),s=a(63929),o=a(64958),l=a(56785),i=a(87269),c=a(10552),d=a(90662),u=a(12614),m=a(49552),h=a.n(m),x=a(25675),p=a(67294),f=a(85893);const g=({children:e,feature:t})=>{const{i18n:a}=(0,r.mV)(),{chainId:m,library:g,account:v}=(0,u.a)(),b=(0,f.jsx)(o.Z,{href:"/swap",children:(0,f.jsx)("a",{className:"text-blue focus:outline-none",children:a._(a._("home page"))})}),w=Object.entries(i.Z).reduce(((e,[a,r])=>(r.includes(t)&&e.push(a),e)),[]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z.Controlled,{isOpen:!!v&&!i.Z[m].includes(t),onDismiss:()=>null,transparent:!0,children:(0,f.jsxs)("div",{className:"flex flex-col justify-center p-4 mt-10 gap-7 lg:mt-0",children:[(0,f.jsx)(l.Z,{variant:"h1",className:"max-w-2xl text-center text-white",weight:700,children:a._(a._("Roll it back - this feature is not yet supported on {0}.",{0:c.z[m]}))}),(0,f.jsx)(l.Z,{className:"text-center",children:(0,f.jsx)(r.cC,{id:"Either return to the {link}, or change to an available network.",values:{link:b},components:p.Fragment})}),(0,f.jsx)(l.Z,{className:"uppercase text-white text-center text-lg tracking-[.2rem]",weight:700,children:a._(a._("Available Networks"))}),(0,f.jsx)("div",{className:"flex justify-center gap-5 md:gap-10",children:w.map(((e,t)=>(0,f.jsxs)("button",{className:"flex flex-col items-center justify-start gap-2 text-primary hover:text-white",onClick:()=>{const t=d.b[e];h().set("chainId",e),e===n.a_.ETHEREUM.toString()?null===g||void 0===g||g.send("wallet_switchEthereumChain",[{chainId:"0x1"},v]):e===n.a_.KOVAN.toString()?null===g||void 0===g||g.send("wallet_switchEthereumChain",[{chainId:"0x2A"},v]):null===g||void 0===g||g.send("wallet_addEthereumChain",[t,v])},children:[(0,f.jsx)("div",{className:"w-[40px] h-[40px]",children:(0,f.jsx)(x.default,{src:c.w[e],alt:"Switch Network",className:"rounded-md filter drop-shadow-currencyLogo",width:"40px",height:"40px"})}),(0,f.jsx)(l.Z,{className:"text-sm",children:c.z[e]})]},t)))})]})}),e]})};t.Z=e=>({children:t})=>(0,f.jsx)(g,{feature:e,children:t})},42388:function(e,t,a){a.d(t,{kG:function(){return g}});var r=a(16441),n=a(9279),s=a(57218),o=a(71923),l=a(2551),i=a(12614),c=a(53344),d=a(31611),u=a(90849),m=a(15393),h=a(68411),x=a(67294),p=a(25617),f=a(85926);let g,v;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_APPROVED=1]="NOT_APPROVED",e[e.PENDING=2]="PENDING",e[e.FAILED=3]="FAILED",e[e.APPROVED=4]="APPROVED"}(g||(g={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.REJECTED=1]="REJECTED",e[e.FAILED=2]="FAILED",e[e.NOT_READY=3]="NOT_READY"}(v||(v={})),t.ZP=function(){const{account:e,library:t,chainId:a}=(0,i.a)(),b=(0,p.I0)(),{0:w,1:j}=(0,x.useState)(!1),{0:y,1:N}=(0,x.useState)(void 0);(0,x.useEffect)((()=>{N(void 0)}),[e,a]);const k=a?o.MO[a]:void 0,A=(0,u.Fw)(),B=(0,m.B2)(k,e||n.d),P=(0,h.h7)(),O=(0,x.useMemo)((()=>k?!B&&A?g.PENDING:B?g.APPROVED:g.NOT_APPROVED:g.UNKNOWN),[k,B,A]),I=(0,f.rO)(),E=(0,x.useCallback)((async()=>{if(O!==g.NOT_APPROVED)return console.error("approve was called unnecessarily"),{outcome:v.NOT_READY};if(!k)return console.error("no token"),{outcome:v.NOT_READY};if(!I)return console.error("no bentobox contract"),{outcome:v.NOT_READY};if(!e)return console.error("no account"),{outcome:v.NOT_READY};if(!t)return console.error("no library"),{outcome:v.NOT_READY};try{const n=await(0,l.D)(I,k,e,t,!0,a),{v:s,r:o,s:i}=(0,r.N)(n);return{outcome:v.SUCCESS,permit:{account:e,masterContract:k,v:s,r:o,s:i}}}catch(n){return{outcome:n.code===c.PM?v.REJECTED:v.FAILED}}}),[O,e,t,a,I,k]);return[O,w,y,async function(){if(w){const t=await(null===I||void 0===I?void 0:I.setMasterContractApproval(e,k,!0,0,s.R,s.R));b((0,d.ZD)("Approve Kashi")),await t.wait(),b((0,d.ZD)(""))}else{const e=await E();e.outcome===v.SUCCESS?N(e.permit):e.outcome===v.FAILED&&j(!0)}},async function(r,n){const s=new l.Z(r,e,t,a);let o;O===g.NOT_APPROVED&&y?(s.approve(y),o="Approve Kashi and "+await n(s)):o=await n(s);const i=await s.cook();i.success&&(P(i.tx,{summary:o}),N(void 0),await i.tx.wait())}]}},19394:function(e,t,a){a.d(t,{E:function(){return s}});var r=a(11163),n=a(67294);const s=e=>{const t=(0,r.useRouter)();(0,n.useEffect)((()=>{const{ethereum:a}=window;if(a&&a.on){const r=()=>t.push(e);return a.on("chainChanged",r),()=>{a.removeListener&&a.removeListener("chainChanged",r)}}}),[])}},67801:function(e,t,a){a.d(t,{Z:function(){return c}});var r=a(71923),n=a(16339),s=a(37643),o=a(67294);const l=new r.gG(50,1e4),i=new r.gG(10,1e4);function c(e){const t=(0,o.useMemo)((()=>e?l:i),[e]);return(0,n.C)((0,s.yr)(t))}},30051:function(e,t,a){var r=a(72457),n=a(13752),s=a(52907),o=a(64958),l=a(3990),i=a(41664),c=a(11163),d=(a(67294),a(85893));t.Z=({left:e,children:t,right:a})=>{const u=(0,c.useRouter)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Z,{children:(0,d.jsxs)(r.Z,{className:"px-4 py-4 md:py-8 lg:py-12",maxWidth:"7xl",children:[(0,d.jsxs)("div",{className:"mb-2 grid grid-cols-12 gap-4",children:[(0,d.jsx)("div",{className:"flex justify-center col-span-12 xl:col-span-3 lg:justify-start",children:(0,d.jsx)(i.default,{href:"/borrow",children:(0,d.jsx)("a",{className:"flex justify-center xl:justify-start xl:mx-8",children:(0,d.jsx)(n.Z,{src:"https://app.sushi.com/images/kashi/logo.png",alt:"Kashi",height:64,width:250,placeholder:"empty",priority:!0})})})}),(0,d.jsx)("div",{className:"flex items-end col-span-12 xl:col-span-9",children:(0,d.jsx)("nav",{className:"flex items-center justify-end w-full",children:(0,d.jsx)("div",{className:"flex pr-2 sm:pr-4",children:(0,d.jsx)(o.Z,{href:"/portfolio",children:(0,d.jsxs)("a",{className:"px-2 sm:px-4 flex justify-end items-center font-medium ".concat("/portfolio"===u.pathname?"text-high-emphesis":"text-secondary hover:text-primary"),children:[(0,d.jsx)("svg",{className:"mr-2 fill-current",width:24,height:24,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 355.24 205.5",children:(0,d.jsx)("path",{d:"M350.43,97c-8.7-20-28.9-43.7-56.7-63.5S237.13,2,215.43.2c-1.2-.1-2.4-.2-3.5-.2H76.53c-13,0-23,4-28.4,11.7L4.63,72.3c-6.3,8.8-6.1,21.7.2,36.2,8.7,20,29,43.7,56.7,63.5s56.7,31.5,78.4,33.3c1.7.1,3.3.2,4.9.2h135.5c12.1-.4,21.5-4.3,26.8-11.6l43.4-60.6C356.93,124.3,356.73,111.5,350.43,97ZM209.93,7.4c1.6,0,3.2.1,4.9.2,20.7,1.7,48.2,13,74.6,31.9,4.3,3.1,11.8,9.7,15.7,12.9H188.43l-45-45ZM41.06,40.25c0-1.12-.15-2.24-.15-3.36a1.67,1.67,0,0,1,1.58-1.74,1.62,1.62,0,0,1,1.74,1.61,23.39,23.39,0,0,0,.15,3.11A1.52,1.52,0,0,1,43,41.62,1.68,1.68,0,0,1,41.06,40.25Zm53.15,71.67a1.74,1.74,0,0,1-2.37.13C72.54,95.5,48.5,72,42.33,47a1.77,1.77,0,0,1,1.27-2,1.83,1.83,0,0,1,2,1.24c6,24.39,29.58,47.16,48.41,63.46A1.7,1.7,0,0,1,94.21,111.92ZM173,146.77a1.5,1.5,0,0,1-1.89,1.24c-2.22-.37-4.27-1-6.49-1.49a1.58,1.58,0,0,1-1.11-2.12,1.52,1.52,0,0,1,2.06-1.12l6.17,1.49A1.7,1.7,0,0,1,173,146.77ZM200.51,150c-6.49,1.12-14.4.75-22.94-.62a1.63,1.63,0,0,1-1.42-1.87,1.68,1.68,0,0,1,1.9-1.37c8.22,1.37,15.66,1.75,22,.63a1.67,1.67,0,0,1,1.9,1.36A1.62,1.62,0,0,1,200.51,150Zm-11.78-12.6c-1.6,0-3.1-.1-4.7-.2-20.8-1.7-48.3-13-74.7-31.9s-45.8-41.4-54.2-60.5c-4.9-11.3-5.9-21.4-1.2-28.4l.3-.4c4.1-5.8,11.6-8.4,21.2-8.6h57.5l130,130Zm155.8-8.7-.3.4c-4.2,5.6-11.7,8.1-21.1,8.2h-49.7l-77.9-77.9h117.7c15.8,14.6,24.4,26.8,30.3,40.5C348.63,111.5,349.63,121.8,344.53,128.7Z"})}),(0,d.jsx)("div",{className:"text-base whitespace-nowrap",children:"BentoBox"})]})})})})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-12 gap-4 min-h-1/2",children:[e&&(0,d.jsx)("div",{className:"hidden xl:block xl:col-span-3",style:{maxHeight:"40rem"},children:e}),(0,d.jsx)("div",{className:"col-span-12 ".concat(a?"lg:col-span-8 xl:col-span-6":"xl:col-span-9"),style:{minHeight:"40rem"},children:t}),a&&(0,d.jsx)("div",{className:"col-span-12 lg:col-span-4 xl:col-span-3",style:{maxHeight:"40rem"},children:a})]})]})}),(0,d.jsx)(l.Z,{})]})}}}]);