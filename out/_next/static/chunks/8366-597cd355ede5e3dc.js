"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8366],{56585:function(e,t,r){r.d(t,{iA:function(){return a.i}});var a=r(37601);r(2551),r(27958)},98366:function(e,t,r){r.d(t,{q7:function(){return P},Fp:function(){return x},c0:function(){return D}});var a=r(59499),n=r(84243),o=r(19485),s=r(2593),u=r(21046),l=r(71923),i=r(56279),c=r(56585),d=r(38239),m=r(36325),v=r(83304),f=r(62483),b=r(22339),A=r(12614),p=r(1569),y=r(67294);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const w=["0xC6d54D2f624bc83815b49d9c2203b1330B841cA0"],B=["0x8f2CC3376078568a04eBC600ae5F0a036DBfd812","0x8f7C7181Ed1a2BA41cfC3f5d064eF91b67daef66","0x6b7D436583e5fE0874B7310b74D29A13af816860"];function O(){const{chainId:e}=(0,A.a)(),t=(0,f.rU)();return(0,y.useMemo)((()=>Object.values(t).reduce(((t,r)=>{var a;return null!==i.k&&void 0!==i.k&&i.k[e]&&null!==(a=Object.values(null===i.k||void 0===i.k?void 0:i.k[e]))&&void 0!==a&&a.some((e=>r.address===e.from||r.address===e.to))&&(t[r.address]=r),t}),{})),[t,e])}function P(){var e;const t=(0,v.rO)(),{chainId:r}=(0,A.a)(),a=r&&r!==l.a_.BSC&&r!==l.a_.MATIC&&r!==l.a_.ARBITRUM,o=O(),s=(0,A.T)({chainId:r,contract:t,event:t&&t.filters.LogDeploy(l.MO[r]),shouldFetch:a&&(0,m.vR)(d.L.KASHI,r)}),u=(0,b.HD)({chainId:r,shouldFetch:!a});return null===(e=a?null===s||void 0===s?void 0:s.map((e=>({address:e.args.cloneAddress,data:e.args.data}))):u)||void 0===e?void 0:e.reduce(((e,t)=>{try{const[a,s,u,l]=n.$.decode(["address","address","address","bytes"],t.data);return w.includes(a)||w.includes(s)||B.includes(u)||!(0,m.nm)(r,o[a],o[s],l)?e:[...e,t.address]}catch(a){return e}}),[])}const x=(e=[])=>{const{account:t}=(0,A.a)();return function(e,t=[]){var r,a,n,o;const{chainId:i}=(0,A.a)(),d=(0,v.HW)(),f=l.df[i],g=l.qY[i],w=O(),B=(0,y.useMemo)((()=>[e,t]),[e,t]),P=null===(r=(0,p.Wk)(d,"pollKashiPairs",B,{blocksPerFetch:0}))||void 0===r||null===(a=r.result)||void 0===a?void 0:a[0],x=(0,b.Mh)({chainId:i}),D=Object.keys(w),S=(0,y.useMemo)((()=>[e,D]),[e,D]),T=(0,p.Wk)(d,"getBalances",S),j=null===T||void 0===T||null===(n=T.result)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.reduce(((e,t)=>h(h({},e),{},{[t[0]]:t})),{}),k=Object.values(w).filter((e=>null===j||void 0===j?void 0:j[e.address])).reduce(((e,t)=>{const r=j[t.address],a=null===x||void 0===x?void 0:x.find((e=>e.token===t.address.toLowerCase())),n=(0,m.TB)(t.decimals).mulDiv(j[g.address].rate,r.rate),o=t.address===f?l.B5[i].symbol:t.symbol;return h(h({},e),{},{[t.address]:h(h(h({},t),r),{},{address:t.address,elastic:r.bentoAmount,base:r.bentoShare,strategy:a,usd:n,symbol:o})})}),{});return(0,y.useMemo)((()=>t&&D&&P?t.reduce(((e,t,r)=>{if(i&&k&&j){var a,n,o,l,d,v,f,b;const A=Object.assign({},null===P||void 0===P?void 0:P[r]);A.address=t,A.oracle=(0,m.uw)(i,A.oracle,A.oracle.data),A.asset=k[A.asset],A.collateral=k[A.collateral],A.elapsedSeconds=s.O$.from(Date.now()).div("1000").sub(A.accrueInfo.lastAccrued),A.interestPerYear=A.accrueInfo.interestPerSecond.mul("60").mul("60").mul("24").mul("365"),A.totalCollateralAmount=(0,m.bi)((0,m.sN)(A.collateral,A.totalCollateralShare),A.collateral),A.totalAssetAmount=(0,m.bi)((0,m.sN)(A.asset,A.totalAsset.elastic),A.asset),A.currentBorrowAmount=(0,m.bi)((0,m.Mu)(A,A.totalBorrow.elastic,!0),A.asset),A.currentAllAssets=(0,m.bi)(A.totalAssetAmount.value.add(A.currentBorrowAmount.value),A.asset),A.marketHealth=A.totalCollateralAmount.value.mulDiv((0,m.TB)(18),(0,m.gW)(A.currentExchangeRate,A.oracleExchangeRate,A.spotExchangeRate)).mulDiv((0,m.TB)(18),A.currentBorrowAmount.value),A.currentTotalAsset=(0,m.zK)(A),A.currentAllAssetShares=(0,m.To)(A.asset,A.currentAllAssets.value),A.maxAssetAvailable=(0,m.LT)(A.totalAsset.elastic.mulDiv(A.currentAllAssets.value,A.currentAllAssetShares),(0,m.sN)(A.asset,(0,m.Nt)(A.currentTotalAsset,A.totalAsset.base.sub(1e3),!1))),A.maxAssetAvailableFraction=A.maxAssetAvailable.mulDiv(A.currentTotalAsset.base,A.currentAllAssets.value),A.utilization=(0,m.TB)(18).mulDiv(A.currentBorrowAmount.value,A.currentAllAssets.value),A.supplyAPR=(0,m.Ym)(A.interestPerYear.mulDiv(A.utilization,(0,m.TB)(18))),A.currentInterestPerYear=(0,m.FO)(A,A.interestPerYear),A.currentSupplyAPR=(0,m.Ym)(A.currentInterestPerYear.mulDiv(A.utilization,(0,m.TB)(18))),A.userCollateralAmount=(0,m.bi)((0,m.sN)(A.collateral,A.userCollateralShare),A.collateral),A.currentUserAssetAmount=(0,m.bi)(A.userAssetFraction.mulDiv(A.currentAllAssets.value,A.totalAsset.base),A.asset),A.currentUserBorrowAmount=(0,m.bi)(A.userBorrowPart.mulDiv(A.currentBorrowAmount.value,A.totalBorrow.base),A.asset),A.currentUserLentAmount=(0,m.bi)(A.userAssetFraction.mulDiv(A.currentBorrowAmount.value,A.totalAsset.base),A.asset),A.feesEarned=(0,m.bi)(A.accrueInfo.feesEarnedFraction.mulDiv(A.currentAllAssets.value,A.totalAsset.base),A.asset),A.maxBorrowable={oracle:A.userCollateralAmount.value.mulDiv((0,m.TB)(16).mul("75"),A.oracleExchangeRate),spot:A.userCollateralAmount.value.mulDiv((0,m.TB)(16).mul("75"),A.spotExchangeRate),stored:A.userCollateralAmount.value.mulDiv((0,m.TB)(16).mul("75"),A.currentExchangeRate)},A.maxBorrowable.minimum=(0,m.LT)(A.maxBorrowable.oracle,A.maxBorrowable.spot,A.maxBorrowable.stored),A.maxBorrowable.safe=A.maxBorrowable.minimum.mulDiv("95","100").sub(A.currentUserBorrowAmount.value),A.maxBorrowable.possible=(0,m.LT)(A.maxBorrowable.safe,A.maxAssetAvailable),A.safeMaxRemovable=u._Y,A.health=A.currentUserBorrowAmount.value.mulDiv((0,m.TB)(18),A.maxBorrowable.minimum),A.netWorth=(0,m.xM)(A.currentUserAssetAmount.value.sub(A.currentUserBorrowAmount.value),A.asset).add((0,m.xM)(A.userCollateralAmount.value,A.collateral)),A.search=A.asset.symbol+"/"+A.collateral.symbol,A.interestPerYear={value:A.interestPerYear,string:A.interestPerYear.toFixed(16)},A.strategyAPY={asset:{value:s.O$.from(String(Math.floor(1e16*(null!==(a=null===(n=A.asset.strategy)||void 0===n?void 0:n.apy)&&void 0!==a?a:0)))),string:String(null!==(o=null===(l=A.asset.strategy)||void 0===l?void 0:l.apy)&&void 0!==o?o:0)},collateral:{value:s.O$.from(String(Math.floor(1e16*(null!==(d=null===(v=A.collateral.strategy)||void 0===v?void 0:v.apy)&&void 0!==d?d:0)))),string:String(null!==(f=null===(b=A.collateral.strategy)||void 0===b?void 0:b.apy)&&void 0!==f?f:0)}},A.utilization={value:A.utilization,string:c.iA.from(A.utilization,s.O$.from(10).pow(16)).toString()},A.supplyAPR={value:A.supplyAPR,valueWithStrategy:A.supplyAPR.add(A.strategyAPY.asset.value.mulDiv(A.utilization.value,(0,m.TB)(18))),string:c.iA.from(A.supplyAPR,(0,m.TB)(16)).toString(),stringWithStrategy:c.iA.from(A.strategyAPY.asset.value.add(A.supplyAPR.add(A.strategyAPY.asset.value.mulDiv(A.utilization.value,(0,m.TB)(18)))),(0,m.TB)(16)).toString()},A.currentSupplyAPR={value:A.currentSupplyAPR,valueWithStrategy:A.currentSupplyAPR.add(A.strategyAPY.asset.value.mulDiv(A.utilization.value,(0,m.TB)(18))),string:c.iA.from(A.currentSupplyAPR,(0,m.TB)(16)).toString(),stringWithStrategy:c.iA.from(A.currentSupplyAPR.add(A.strategyAPY.asset.value.mulDiv(A.utilization.value,(0,m.TB)(18))),(0,m.TB)(16)).toString()},A.currentInterestPerYear={value:A.currentInterestPerYear,string:c.iA.from(A.currentInterestPerYear,s.O$.from(10).pow(16)).toString()},A.health={value:A.health,string:c.iA.from(A.health,(0,m.TB)(16))},A.maxBorrowable={oracle:(0,m.bi)(A.maxBorrowable.oracle,A.asset),spot:(0,m.bi)(A.maxBorrowable.spot,A.asset),stored:(0,m.bi)(A.maxBorrowable.stored,A.asset),minimum:(0,m.bi)(A.maxBorrowable.minimum,A.asset),safe:(0,m.bi)(A.maxBorrowable.safe,A.asset),possible:(0,m.bi)(A.maxBorrowable.possible,A.asset)},A.safeMaxRemovable=(0,m.bi)(A.safeMaxRemovable,A.collateral),e=[...e,A]}return e}),[]):[]),[t,D,P,i,k,j])}(t,e)};function D(e){return x([(0,o.Kn)(e)])[0]}},83304:function(e,t,r){r.d(t,{UK:function(){return a.UK},qL:function(){return a.qL},x7:function(){return d},rO:function(){return c.rO},HW:function(){return c.HW},mX:function(){return c.mX},cq:function(){return c.cq},MQ:function(){return c.MQ},JY:function(){return c.JY},wq:function(){return c.wq},mi:function(){return c.mi},ou:function(){return c.ou},JE:function(){return c.JE},Ib:function(){return c.Ib},i7:function(){return c.i7},sL:function(){return c.sL},oF:function(){return m.ZP},lz:function(){return c.lz}});var a=r(27262),n=r(19485),o=r(9279),s=r(71923),u=r(12614),l=r(68411),i=r(67294),c=r(85926);var d=function(){const{account:e,chainId:t}=(0,u.a)(),r=(0,l.h7)(),a=(0,c.rO)();return{deposit:(0,i.useCallback)((async(u,l)=>{if(l&&t)try{const i=(0,n.Kn)(u);if(i===s.df[t]){const t=await(null===a||void 0===a?void 0:a.deposit(o.d,e,e,l,0,{value:l}));return r(t,{summary:"Deposit to Bentobox"})}{const t=await(null===a||void 0===a?void 0:a.deposit(i,e,e,l,0));return r(t,{summary:"Deposit to Bentobox"})}}catch(i){return console.error("bentobox deposit error:",i),i}}),[e,r,a,t]),withdraw:(0,i.useCallback)((async(o,u,l)=>{if(u&&t)try{const i=(0,n.Kn)(o),c=await(null===a||void 0===a?void 0:a.withdraw(i===s.df[t]?"0x0000000000000000000000000000000000000000":i,e,e,u,l?l.toString():0));return r(c,{summary:"Withdraw from Bentobox"})}catch(i){return console.error("bentobox withdraw error:",i),i}}),[e,r,a,t]),harvest:(0,i.useCallback)((async(e,n=!1)=>{if(t)try{const t=await(null===a||void 0===a?void 0:a.harvest(e,n,0));return r(t,{summary:n?"Harvest & Rebalance":"Harvest"})}catch(o){return console.error("bentobox harvest error:",o),o}}),[])}};r(89638),r(37601);r(82766),r(76294),r(80113);var m=r(90573)},76294:function(e,t,r){var a=r(59499),n=r(74221),o=r(67294);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}t.Z=function({data:e,options:t}){const{0:r,1:u}=(0,o.useState)(""),l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);return{result:function({fuse:e,data:t,term:r}){const a=e.search(r);return r?a.map((e=>e.item)):t}({fuse:new n.Z(e||[],l),data:e,term:r}),search:u,term:r,reset:()=>u("")}}},80113:function(e,t,r){var a=r(2593),n=r(67294);function o(e,t,r="."){try{return t.replace("[",r).replace("]","").split(r).reduce(((e,t)=>e[t]),e)}catch(a){return}}t.Z=(e,t=null)=>{const{0:r,1:s}=(0,n.useState)(t);return{items:(0,n.useMemo)((()=>{if(e&&e.length>0){const t=[...e];return null!==r&&t.sort(((e,t)=>{const n=o(e,r.key),s=o(t,r.key);if(n instanceof a.O$&&s instanceof a.O$){if(n.lt(s))return"ascending"===r.direction?-1:1;if(n.gt(s))return"ascending"===r.direction?1:-1}else{if(n===1/0)return"ascending"===r.direction?-1:1;if(s===1/0)return"ascending"===r.direction?1:-1;if(n<s)return"ascending"===r.direction?-1:1;if(n>s)return"ascending"===r.direction?1:-1}return 0})),t}return[]}),[e,r]),requestSort:(e,t="ascending")=>{r&&r.key===e&&"ascending"===r.direction?t="descending":r&&r.key===e&&"descending"===r.direction&&(t="ascending"),s({key:e,direction:t})},sortConfig:r}}}}]);