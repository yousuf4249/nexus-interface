(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{58173:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.signERC2612Permit=t.signDaiPermit=void 0;const a=n(20772),o=n(44625),i="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",s=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],c=e=>"".padEnd(e,"0"),l=(e,t)=>r(void 0,void 0,void 0,(function*(){return o.hexToUtf8((yield a.call(e,t,"0x06fdde03")).substr(130))})),d=(e,t)=>r(void 0,void 0,void 0,(function*(){if("string"!==typeof t)return t;const n=t,[r,o]=yield Promise.all([l(e,n),a.getChainId(e)]);return{name:r,version:"1",chainId:o,verifyingContract:n}}));t.signDaiPermit=(e,t,n,o,l,u)=>r(void 0,void 0,void 0,(function*(){const r=t.verifyingContract||t,p={holder:n,spender:o,nonce:u||(yield a.call(e,r,`0x7ecebe00${c(24)}${n.substr(2)}`)),expiry:l||i,allowed:!0},f=((e,t)=>({types:{EIP712Domain:s,Permit:[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}]},primaryType:"Permit",domain:t,message:e}))(p,yield d(e,t)),m=yield a.signData(e,n,f);return Object.assign(Object.assign({},m),p)})),t.signERC2612Permit=(e,t,n,o,l=i,u,p)=>r(void 0,void 0,void 0,(function*(){const r=t.verifyingContract||t,f={owner:n,spender:o,value:l,nonce:p||(yield a.call(e,r,`0x7ecebe00${c(24)}${n.substr(2)}`)),deadline:u||i},m=((e,t)=>({types:{EIP712Domain:s,Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},primaryType:"Permit",domain:t,message:e}))(f,yield d(e,t)),g=yield a.signData(e,n,m);return Object.assign(Object.assign({},g),f)}))},44625:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hexToUtf8=void 0;const a=r(n(57458));t.hexToUtf8=function(e){let t="",n=0,r=(e=(e=(e=(e=(e=e.replace(/^0x/i,"")).replace(/^(?:00)*/,"")).split("").reverse().join("")).replace(/^(?:00)*/,"")).split("").reverse().join("")).length;for(let a=0;a<r;a+=2)n=parseInt(e.substr(a,2),16),t+=String.fromCharCode(n);return a.default.decode(t)}},20772:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.call=t.getChainId=t.setChainIdOverride=t.signData=t.send=void 0;t.send=(e,t,n)=>new Promise(((r,a)=>{var o;const i={id:Math.floor(1e10*Math.random()),method:t,params:n},s=(e,t)=>{e?a(e):t.error?(console.error(t.error),a(t.error)):r(t.result)},c=(null===(o=e.provider)||void 0===o?void 0:o.provider)||e.provider||e;c.getUncheckedSigner?c.send(t,n).then((e=>r(e))).catch((e=>a(e))):c.sendAsync?c.sendAsync(i,s):c.send(i,s).catch((e=>{if("Hardhat Network doesn't support JSON-RPC params sent as an object"!==e.message)throw e;c.send(t,n).then((e=>r(e))).catch((e=>a(e)))}))}));const a=(e,t,a)=>n(void 0,void 0,void 0,(function*(){if((yield e.getAddress()).toLowerCase()!==t.toLowerCase())throw new Error("Signer address does not match requested signing address");const n=a.types,{EIP712Domain:o}=n,i=r(n,["EIP712Domain"]),s=yield e.signTypedData?e.signTypedData(a.domain,i,a.message):e._signTypedData(a.domain,i,a.message);return{r:"0x"+(c=s).substring(2).substring(0,64),s:"0x"+c.substring(2).substring(64,128),v:parseInt(c.substring(2).substring(128,130),16)};var c}));t.signData=(e,r,o)=>n(void 0,void 0,void 0,(function*(){if(e._signTypedData||e.signTypedData)return a(e,r,o);const n="string"===typeof o?o:JSON.stringify(o),i=yield t.send(e,"eth_signTypedData_v4",[r,n]).catch((n=>{if("Method eth_signTypedData_v4 not supported."===n.message)return t.send(e,"eth_signTypedData",[r,o]);throw n}));return{r:i.slice(0,66),s:"0x"+i.slice(66,130),v:parseInt(i.slice(130,132),16)}}));let o=null;t.setChainIdOverride=e=>{o=e},t.getChainId=e=>n(void 0,void 0,void 0,(function*(){return o||t.send(e,"eth_chainId")})),t.call=(e,n,r)=>t.send(e,"eth_call",[{to:n,data:r},"latest"])},60972:function(e,t,n){"use strict";var r=n(85169),a=n(11163),o=n(85893);t.Z=()=>{const{i18n:e}=(0,r.mV)(),t=(0,a.useRouter)();return(0,o.jsx)("div",{children:(0,o.jsxs)("a",{onClick:t.back,className:"flex items-center space-x-2 text-base text-center cursor-pointer font text-secondary hover:text-high-emphesis",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),(0,o.jsx)("span",{children:e._(e._("Go Back"))})]})})}},17141:function(e,t,n){"use strict";var r=n(63153),a=n(36325),o=n(85893);const i={default:"h-[24px]",sm:"h-5 text-[10px]",lg:"h-12 text-[14px]"},s={filled:{default:"bg-gray-700 text-white",white:"bg-high-emphesis text-dark-700",purple:"bg-purple bg-opacity-25 text-purple",yellow:"bg-yellow bg-opacity-[0.35] text-yellow",blue:"bg-blue bg-opacity-[0.35] text-blue",green:"bg-green bg-opacity-25 text-green",pink:"bg-pink bg-opacity-25 text-pink",red:"bg-red bg-opacity-25 text-red"}};t.Z=({label:e,color:t="default",variant:n="filled",size:c="default",className:l="",onClick:d,icon:u,endIcon:p=(0,o.jsx)(r.b0D,{width:12,height:12,strokeWidth:5}),id:f=""})=>(0,o.jsxs)("div",{id:f,className:(0,a.AK)(s[n][t],i[c],d?"pr-1":"pr-3","whitespace-nowrap inline-flex rounded-[12px] py-0.5 pl-3 font-bold text-xs leading-5 gap-2 items-center justify-center",l),children:[u&&(0,o.jsx)("div",{className:"rounded",onClick:d,children:u}),e,d&&(0,o.jsx)("div",{className:"rounded bg-[rgba(255,255,255,0.12)] hover:bg-[rgba(255,255,255,0.24)] cursor-pointer p-0.5",onClick:d,children:p})]})},66223:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(36325),a=(n(67294),n(41626)),o=n(85893);function i({currency0:e,currency1:t,className:n="",logoClassName:i="",size:s=16}){return(0,o.jsxs)("div",{className:(0,r.AK)("flex items-center space-x-2",n),children:[(0,o.jsx)(a.X,{className:i,currency:e,size:s.toString()+"px"}),(0,o.jsx)(a.X,{className:i,currency:t,size:s.toString()+"px"})]})}},40114:function(e,t,n){"use strict";var r=n(36325),a=(n(67294),n(85893));t.Z=({children:e,className:t=""})=>(0,a.jsx)("div",{className:(0,r.AK)("flex flex-col justify-center items-center py-4 px-3 rounded min-h-empty",t),children:e})},48410:function(e,t,n){"use strict";var r=n(59499),a=n(4730),o=n(36325),i=n(67294),s=n(85893);const c=["value","onUserInput","placeholder","className"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=RegExp("^\\d*(?:\\\\[.])?\\d*$"),p="w-0 p-0 text-2xl bg-transparent",f=i.memo((e=>{let{value:t,onUserInput:n,placeholder:r,className:i=p}=e,l=(0,a.Z)(e,c);return(0,s.jsx)("input",d(d({},l),{},{value:t,onChange:e=>{var t;(""===(t=e.target.value.replace(/,/g,"."))||u.test((0,o.hr)(t)))&&n(t)},inputMode:"decimal",title:"Token Amount",autoComplete:"off",autoCorrect:"off",type:"text",pattern:"^[0-9]*[.,]?[0-9]*$",placeholder:r||"0.0",min:0,minLength:1,maxLength:79,spellCheck:"false",className:(0,o.AK)("relative font-bold outline-none border-none flex-auto overflow-hidden overflow-ellipsis placeholder-low-emphesis focus:placeholder-primary",i)}))}));f.displayName="NumericalInput",t.Z=f},23987:function(e,t,n){"use strict";var r=n(59499),a=n(4730),o=n(36325),i=n(67294),s=n(85893);const c=["value","onUserInput","placeholder","className","align","fontSize"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=RegExp("^\\d*$"),p=i.memo((e=>{let{value:t,onUserInput:n,placeholder:r,className:i,align:l,fontSize:p="24px"}=e,f=(0,a.Z)(e,c);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("input",d({value:t,onChange:e=>{var t;(""===(t=e.target.value.replace(/,/g,".").replace(/%/g,""))||u.test((0,o.hr)(t)))&&Number(t)<=100&&n(t)},inputMode:"decimal",title:"Token Amount",autoComplete:"off",autoCorrect:"off",type:"text",pattern:"^[0-9]*$",placeholder:r||"100",maxLength:3,className:(0,o.AK)("right"===l&&"text-right","font-medium bg-transparent whitespace-nowrap overflow-ellipsis flex-auto",i),style:{fontSize:p}},f))})}));p.displayName="PercentInput",t.Z=p},39281:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(59499),a=n(4730),o=n(36325),i=n(67294),s=n(85893);const c=["value","onUserInput","placeholder","className","align","fontSize"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=i.memo((e=>{let{value:t,onUserInput:n,placeholder:r,className:i="flex w-full h-full p-3 font-bold rounded overflow-ellipsis recipient-address-input bg-dark-900 placeholder-low-emphesis",align:l,fontSize:u="24px"}=e,p=(0,a.Z)(e,c);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("input",d({value:t,onChange:e=>{n(e.target.value.replace(/\s+/g,""))},inputMode:"text",title:"Wallet Address or ENS name",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",placeholder:"Wallet Address or ENS name",pattern:"^(0x[a-fA-F0-9]{40})$",type:"text",className:(0,o.AK)("right"===l&&"text-right","font-medium bg-transparent whitespace-nowrap overflow-ellipsis flex-auto",i),style:{fontSize:u}},p))})}));u.displayName="AddressInput";var p=u,f=n(48410);var m={Address:p,Percent:n(23987).Z,Numeric:f.Z}},47788:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r=n(9279),a=n(61744),o=n(63801),i=n(85169),s=n(71923),c=n(60972),l=n(17141),d=n(53344),u=n(9008),p=n(67294),f=n(71862),m=n(72457),g=n(15097),h=n(66223),v=n(40114),y=n(39281),b=n(56785),x=n(63192),k=n(59499),w=n(12614),j=n(68411),P=n(19485),_=n(62483),O=n(85926);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,k.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=()=>{const{account:e,chainId:t}=(0,w.a)(),n=(0,O.HW)(),r=(0,O.VN)(),a=(0,O.Y1)(),{0:o,1:i}=(0,p.useState)([]),{0:c,1:l}=(0,p.useState)(),{0:d,1:u}=(0,p.useState)(!1),{0:f,1:m}=(0,p.useState)(!0),g=(0,_.e_)(),h=(0,p.useRef)(!1),v=(0,p.useCallback)((async()=>{try{if(h.current=!0,s.a_.MATIC===t){const r=500,o=await(null===a||void 0===a?void 0:a.allPairsLength()),c=[];for(let e=0;e<o;e+=r)c.push(e);const l=(await Promise.all(c.map((e=>null===n||void 0===n?void 0:n.getPairs("0x5757371414417b8C6CAad45bAeF941aBc7d3Ab32",e,Math.min(e+r,o.toNumber())))))).flat().filter((e=>"0x1f6c3E047f529f82f743a7378A212a3d62fAA390"!==e.token0)),d=l.map((e=>e[0])),u=await(null===n||void 0===n?void 0:n.pollPairs(e,d)),p=Array.from(new Set(l.reduce(((e,t)=>e.push(t.token,t.token0,t.token1)&&e),[]))).flat(),f=(await(null===n||void 0===n?void 0:n.getTokenInfo(p))).reduce(((e,t)=>(e[t[0]]=t,e)),{}),m=l.map(((e,n)=>{const r=new s.WU(t,f[e.token].token,f[e.token].decimals,f[e.token].symbol,f[e.token].name),a=f[e.token0],o=f[e.token1];return{address:r.address,decimals:r.decimals,name:r.name,symbol:r.symbol,balance:s.ih.fromRawAmount(r,u[n].balance),totalSupply:e.totalSupply,tokenA:new s.WU(t,a.token,a.decimals,a.symbol,a.name),tokenB:new s.WU(t,o.token,o.decimals,o.symbol,o.name)}}));m&&i(m)}else if(t&&[s.a_.ETHEREUM,s.a_.BSC].includes(t)){var o,c,l;const n={[s.a_.ETHEREUM]:["https://api.covalenthq.com/v1/".concat(s.a_.ETHEREUM,"/address/").concat(String(e).toLowerCase(),"/stacks/uniswap_v2/balances/?key=ckey_cba3674f2ce5450f9d5dd290589&page-size=1000")],[s.a_.BSC]:["https://api.covalenthq.com/v1/".concat(s.a_.BSC,"/address/").concat(String(e).toLowerCase(),"/stacks/pancakeswap/balances/?key=ckey_cba3674f2ce5450f9d5dd290589&page-size=1000"),"https://api.covalenthq.com/v1/".concat(s.a_.BSC,"/address/").concat(String(e).toLowerCase(),"/stacks/pancakeswap_v2/balances/?key=ckey_cba3674f2ce5450f9d5dd290589&page-size=1000")]},a=await Promise.all(n[t].map((e=>fetch(e))));console.log({responses:a});let m=[];if(t===s.a_.ETHEREUM){var d,u;const{data:e}=await a[0].json();m=null===e||void 0===e||null===(d=e.uniswap_v2)||void 0===d||null===(u=d.balances)||void 0===u?void 0:u.filter((e=>"0"!==e.pool_token.balance)).map((e=>S(S({},e),{},{version:"v2"})))}else if(t===s.a_.BSC){var p,f;const{data:e}=await a[0].json(),{data:t}=await a[1].json();m=[...null===t||void 0===t||null===(p=t.pancakeswap)||void 0===p||null===(f=p.balances)||void 0===f?void 0:f.filter((e=>"0"!==e.pool_token.balance)).map((e=>S(S({},e),{},{version:"v2"})))]}const h=null===(o=await(null===r||void 0===r?void 0:r.getTokenInfo(Array.from(new Set(null===(c=m)||void 0===c?void 0:c.reduce(((e,t)=>e.push(t.pool_token.contract_address,t.token_0.contract_address,t.token_1.contract_address)&&e),[]))))))||void 0===o?void 0:o.reduce(((e,t)=>(e[t[0]]=S({},t),e[t[0]].decimals=e[t[0]].decimals.toNumber(),e)),{}),v=null===(l=m)||void 0===l?void 0:l.map((e=>{const n=new s.WU(t,(0,P.Kn)(e.pool_token.contract_address),h[(0,P.Kn)(e.pool_token.contract_address)].decimals,h[(0,P.Kn)(e.pool_token.contract_address)].symbol,h[(0,P.Kn)(e.pool_token.contract_address)].name),r=h[(0,P.Kn)(e.token_0.contract_address)],a=h[(0,P.Kn)(e.token_1.contract_address)];return{address:(0,P.Kn)(e.pool_token.contract_address),decimals:n.decimals,name:"".concat(r.symbol,"-").concat(a.symbol," LP Token"),symbol:"".concat(r.symbol,"-").concat(a.symbol),balance:s.ih.fromRawAmount(n,e.pool_token.balance),totalSupply:e.pool_token.total_supply,tokenA:g[(0,P.Kn)(e.token_0.contract_address)]||new s.WU(t,r.address||r.token,r.decimals,r.symbol,r.name),tokenB:g[(0,P.Kn)(e.token_1.contract_address)]||new s.WU(t,a.address||a.token,a.decimals,a.symbol,a.name),version:e.version}}));v&&i(v)}}finally{m(!1),h.current=!1}}),[t,a,n,e,r,g]);return(0,p.useEffect)((()=>{t&&e&&n&&!h.current&&v()}),[e,t,n,v]),{updateLPTokens:v,lpTokens:o,selectedLPToken:c,setSelectedLPToken:l,selectedLPTokenAllowed:d,setSelectedLPTokenAllowed:u,loading:f,updatingLPTokens:h.current}},E=n(21046),C=n(58173),A=n(50542);var L=(e="v2")=>{const{chainId:t,library:n,account:r}=(0,w.a)(),a=(0,O.Uv)(e),o=1200;let i="";t===s.a_.ETHEREUM?i="Uniswap":t===s.a_.BSC&&(i="PancakeSwap");return{migrate:(0,p.useCallback)((async(e,t)=>{if(a){const n=Math.floor((new Date).getTime()/1e3)+o,r=[e.tokenA.address,e.tokenB.address,t,E._Y,E._Y,n],s=await a.estimateGas.migrate(...r),c=a.migrate(...r,{gasLimit:s.mul(120).div(100)});return A.ZP.event({category:"Migrate",action:"".concat(i,"->Sushiswap"),label:"migrate"}),c}}),[a,o,i]),migrateWithPermit:(0,p.useCallback)((async(e,t)=>{if(r&&a){const s=Math.floor((new Date).getTime()/1e3)+o,c=await(0,C.signERC2612Permit)(n,e.address,r,a.address,t.toString(),s),l=[e.tokenA.address,e.tokenB.address,t,E._Y,E._Y,s,c.v,c.r,c.s],d=await a.estimateGas.migrateWithPermit(...l),u=await a.migrateWithPermit(...l,{gasLimit:d.mul(120).div(100)});return A.ZP.event({category:"Migrate",action:"".concat(i,"->Sushiswap"),label:"migrateWithPermit"}),u}}),[r,n,a,o,i])}};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,k.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=()=>{var e;const{library:t,account:n,chainId:r}=(0,w.a)(),o=N(),{migrate:i,migrateWithPermit:c}=L(null===o||void 0===o||null===(e=o.selectedLPToken)||void 0===e?void 0:e.version),{0:l,1:d}=(0,p.useState)(),{0:u,1:f}=(0,p.useState)(""),m=(0,j.h7)(),{0:g,1:h}=(0,p.useState)(null),v=(0,j.ub)(null!==g&&void 0!==g?g:void 0);(0,p.useEffect)((()=>{o.setSelectedLPToken(void 0)}),[l]);const y=(0,p.useCallback)((async()=>{if(l&&o.selectedLPToken&&n&&t){const e=(0,a.vz)(u||"0",o.selectedLPToken.decimals),t="approve"===l?i:c,n=await t(o.selectedLPToken,e);let d;r===s.a_.ETHEREUM?d="Uniswap":r===s.a_.BSC?d="PancakeSwap":r===s.a_.MATIC&&(d="QuickSwap"),m(n,{summary:"Migrate ".concat(d," ").concat(o.selectedLPToken.symbol," liquidity to NEXUSSwap")}),h(n.hash),await n.wait(),o.setSelectedLPToken(void 0),await o.updateLPTokens()}}),[l,o,n,t,u,i,c,r,m]);return D(D({},o),{},{amount:u,setAmount:f,mode:l,setMode:d,onMigrate:y,pendingMigrationHash:g,isMigrationPending:v})},Z=n(27262),U=n(85893);const B=s.QA.BigInt(0),W=({state:e})=>{const{i18n:t}=(0,i.mV)(),n=(0,p.useCallback)((()=>{if(e.selectedLPToken){let t=e.selectedLPToken.balance.quotient;if(e.selectedLPToken.address===r.d){const e=s.QA.exponentiate(s.QA.BigInt(10),s.QA.BigInt(16));t=s.QA.greaterThan(t,e)?s.QA.subtract(t,e):B}e.setAmount((0,a.bM)(t.toString(),e.selectedLPToken.decimals))}}),[e]);return(0,p.useEffect)((()=>{e.mode&&0!==e.lpTokens.length&&e.selectedLPToken||e.setAmount("")}),[e]),e.lpTokens.length?e.mode&&e.selectedLPToken?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{variant:"sm",className:"text-secondary",children:t._(t._("Amount of Tokens"))}),(0,U.jsxs)("div",{className:"relative flex items-center w-full mb-4",children:[(0,U.jsx)(y.Z.Numeric,{className:"w-full p-3 rounded bg-dark-700 focus:ring focus:ring-pink",value:e.amount,onUserInput:t=>e.setAmount(t)}),(0,U.jsx)(f.ZP,{variant:"outlined",color:"pink",size:"xs",onClick:n,className:"absolute right-4 focus:ring focus:ring-pink",children:t._(t._("MAX"))})]})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{variant:"sm",className:"text-secondary",children:"Amount of Tokens"}),(0,U.jsx)("div",{className:"p-3 text-center rounded cursor-not-allowed bg-dark-800",children:(0,U.jsx)(b.Z,{variant:"lg",className:"text-secondary",children:e.mode&&0===e.lpTokens.length?"No LP tokens found":"Select an LP Token"})})]}):null},q=({lpToken:e,onToggle:t,isSelected:n,updating:r,exchange:a})=>(0,U.jsxs)("div",{className:"flex items-center justify-between px-3 py-5 rounded cursor-pointer bg-dark-800 hover:bg-dark-700",onClick:()=>t(e),children:[(0,U.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,U.jsx)(h.Z,{currency0:e.tokenA,currency1:e.tokenB,size:20}),(0,U.jsx)(b.Z,{variant:"lg",className:"text-primary",children:"".concat(e.tokenA.symbol,"/").concat(e.tokenB.symbol)}),e.version&&(0,U.jsx)(l.Z,{color:"purple",label:e.version})]}),n?(0,U.jsx)(o.b0D,{width:16,height:16}):(0,U.jsx)(o.v4q,{width:16,height:16})]},e.address),R=({state:e})=>{const{i18n:t}=(0,i.mV)();const n=[{key:"permit",text:t._(t._("Non-hardware Wallet")),description:t._(t._("Migration is done in one-click using your signature (permit)"))},{key:"approve",text:t._(t._("Hardware Wallet")),description:t._(t._("You need to first approve LP tokens and then migrate it"))}];return(0,U.jsx)(U.Fragment,{children:n.reduce(((t,{key:n,text:r,description:a})=>(void 0!==e.mode&&n!==e.mode||t.push((0,U.jsxs)("div",{className:"flex items-center justify-between p-3 rounded cursor-pointer bg-dark-800 hover:bg-dark-700",onClick:()=>{return t=n,void e.setMode(t!==e.mode?t:void 0);var t},children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("div",{children:(0,U.jsx)(b.Z,{variant:"sm",children:r})}),(0,U.jsx)("div",{children:(0,U.jsx)(b.Z,{variant:"sm",className:"text-secondary",children:a})})]}),n===e.mode?(0,U.jsx)(o.b0D,{width:16,height:16}):(0,U.jsx)(o.v4q,{width:16,height:16})]},n)),t)),[])})},K=({state:e,exchange:t})=>{var n,r,o,c,l;const{i18n:u}=(0,i.mV)(),{0:m,1:h}=(0,p.useState)({}),v=(0,O.Uv)(null!==(n=e.selectedLPToken)&&void 0!==n&&n.version?null===(r=e.selectedLPToken)||void 0===r?void 0:r.version:void 0),[y,b]=(0,Z.qL)(null===(o=e.selectedLPToken)||void 0===o?void 0:o.balance,null===v||void 0===v?void 0:v.address),x=!(null===(c=e.selectedLPToken)||void 0===c||!c.balance)&&(null===(l=e.selectedLPToken)||void 0===l?void 0:l.balance.equalTo(B)),k=!e.amount;if((0,p.useEffect)((()=>{h({})}),[e.selectedLPToken]),!e.mode||0===e.lpTokens.length||!e.selectedLPToken||!e.amount)return(0,U.jsx)(f.ZP,{fullWidth:!0,disabled:!0,children:"Migrate"});const w=s.QA.lessThan(e.selectedLPToken.balance.quotient,s.QA.BigInt((0,a.vz)(e.amount||"0",e.selectedLPToken.decimals).toString()));return(0,U.jsxs)("div",{className:"space-y-4",children:[w?(0,U.jsx)("div",{className:"text-sm text-primary",children:u._(u._("Insufficient Balance"))}):e.loading?(0,U.jsx)(g.Z,{children:u._(u._("Loading"))}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{className:"flex justify-between",children:(0,U.jsxs)("div",{className:"text-sm text-secondary",children:[u._(u._("Balance")),":"," ",(0,U.jsx)("span",{className:"text-primary",children:e.selectedLPToken.balance.toSignificant(4)})]})}),"approve"===e.mode&&(0,U.jsx)(f.ZP,{fullWidth:!0,loading:y===Z.UK.PENDING,onClick:b,disabled:y!==Z.UK.NOT_APPROVED||k,children:y===Z.UK.APPROVED?u._(u._("Approved")):u._(u._("Approve"))}),("approve"===e.mode&&y===Z.UK.APPROVED||"permit"===e.mode)&&(0,U.jsx)(f.ZP,{fullWidth:!0,loading:e.isMigrationPending,disabled:x||e.isMigrationPending||k,onClick:async()=>{h({});try{await e.onMigrate()}catch(m){console.log(m),h(m)}},children:u._(u._("Migrate"))})]}),m.message&&m.code!==d.PM&&(0,U.jsx)("div",{className:"font-medium text-center text-red",children:m.message}),(0,U.jsx)("div",{className:"text-sm text-center text-low-emphesis",children:u._(u._("Your {exchange} {0}/{1} liquidity will become NEXUSSwap {2}/{3} liquidity.",{0:e.selectedLPToken.tokenA.symbol,1:e.selectedLPToken.tokenB.symbol,2:e.selectedLPToken.tokenA.symbol,3:e.selectedLPToken.tokenB.symbol,exchange:t}))})]})},z=({state:e,exchange:t})=>{const{i18n:n}=(0,i.mV)();function r(t){e.setSelectedLPToken(e.selectedLPToken!==t?t:void 0),e.setAmount("")}return e.mode?0===e.lpTokens.length?(0,U.jsx)(v.Z,{children:n._(n._("No Liquidity found"))}):(0,U.jsx)(U.Fragment,{children:e.lpTokens.reduce(((n,a)=>(a.balance&&s.QA.greaterThan(a.balance.quotient,s.QA.BigInt(0))&&n.push((0,U.jsx)(q,{lpToken:a,onToggle:r,isSelected:e.selectedLPToken===a,updating:e.updatingLPTokens,exchange:t})),n)),[])}):null};function Q(){const{i18n:e}=(0,i.mV)(),{account:t,chainId:n}=(0,w.a)(),r=M();let a;return n===s.a_.ETHEREUM?a="Uniswap":n===s.a_.BSC?a="PancakeSwap":n===s.a_.MATIC&&(a="QuickSwap"),(0,U.jsxs)(m.Z,{id:"migrate-page",className:"py-4 space-y-6 md:py-8 lg:py-12",maxWidth:"2xl",children:[(0,U.jsxs)(u.default,{children:[(0,U.jsx)("title",{children:"Migrate | NEXUSSwap"}),(0,U.jsx)("meta",{name:"description",content:"Migrate your liquidity to NEXUSSwap."},"description"),(0,U.jsx)("meta",{name:"twitter:description",content:"Migrate your liquidity to NEXUSSwap."},"twitter:description"),(0,U.jsx)("meta",{property:"og:description",content:"Migrate your liquidity to NEXUSSwap."},"og:description")]}),(0,U.jsxs)("div",{className:"p-4 mb-3 space-y-3",children:[(0,U.jsx)(c.Z,{}),(0,U.jsx)(b.Z,{component:"h1",variant:"h2",children:e._(e._("Migrate {exchange} Liquidity",{exchange:a}))})]}),t?(0,U.jsx)("div",{className:"p-4 space-y-4 rounded bg-dark-900",children:r.loading?(0,U.jsx)(b.Z,{variant:"lg",className:"p-4 text-center text-primary",children:(0,U.jsx)(g.Z,{children:e._(e._("Loading your {exchange} liquidity positions",{exchange:a}))})}):(0,U.jsxs)(U.Fragment,{children:[!r.loading&&(0,U.jsx)(b.Z,{variant:"lg",children:e._(e._("Your Wallet"))}),(0,U.jsx)(R,{state:r}),!r.loading&&r.lpTokens.length>0&&(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{variant:"lg",children:e._(e._("Your Liquidity"))}),(0,U.jsx)(b.Z,{variant:"sm",className:"text-secondary",children:e._("Click on a pool below, input the amount you wish to migrate or select max, and click\nmigrate")})]}),(0,U.jsx)(z,{state:r,exchange:a}),(0,U.jsx)(W,{state:r}),r.selectedLPToken&&(0,U.jsx)(K,{state:r,exchange:a})]})}):(0,U.jsx)(x.Z,{className:"!bg-dark-900 bg-gradient-to-r from-blue/80 hover:from-blue to-green/80 hover:to-green text-white h-[38px]"})]})}},45283:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/legacy/migrate",function(){return n(47788)}])},57458:function(e,t){!function(e){var t,n,r,a=String.fromCharCode;function o(e){for(var t,n,r=[],a=0,o=e.length;a<o;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<o?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function i(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function s(e,t){return a(e>>t&63|128)}function c(e){if(0==(4294967168&e))return a(e);var t="";return 0==(4294965248&e)?t=a(e>>6&31|192):0==(4294901760&e)?(i(e),t=a(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=a(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+=a(63&e|128)}function l(){if(r>=n)throw Error("Invalid byte index");var e=255&t[r];if(r++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(){var e,a;if(r>n)throw Error("Invalid byte index");if(r==n)return!1;if(e=255&t[r],r++,0==(128&e))return e;if(192==(224&e)){if((a=(31&e)<<6|l())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&e)){if((a=(15&e)<<12|l()<<6|l())>=2048)return i(a),a;throw Error("Invalid continuation byte")}if(240==(248&e)&&(a=(7&e)<<18|l()<<12|l()<<6|l())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=o(e),n=t.length,r=-1,a="";++r<n;)a+=c(t[r]);return a},e.decode=function(e){t=o(e),n=t.length,r=0;for(var i,s=[];!1!==(i=d());)s.push(i);return function(e){for(var t,n=e.length,r=-1,o="";++r<n;)(t=e[r])>65535&&(o+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=a(t);return o}(s)}}(t)}},function(e){e.O(0,[1626,9774,2888,179],(function(){return t=45283,e(e.s=t);var t}));var t=e.O();_N_E=t}]);