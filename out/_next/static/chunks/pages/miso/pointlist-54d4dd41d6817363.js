(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6489],{32871:function(e,t,s){"use strict";var n=s(85169),i=s(71923),a=s(10145),r=s(56785),o=s(48511),l=s(53502),c=s(36325),d=s(67294),u=s(85893);t.Z=({listAddress:e,paymentToken:t})=>{const{i18n:s}=(0,n.mV)(),{0:p,1:h}=(0,d.useState)(),{0:m,1:y}=(0,d.useState)(),{0:v,1:x}=(0,d.useState)(),f=(0,c.UJ)(m),b=(0,l.n8)(v||e,!p&&f?f:void 0,t),j=m&&!p&&b&&b.greaterThan(i.xE),w=m&&!p&&(null===b||void 0===b?void 0:b.equalTo(i.xE));return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"flex flex-col flex-grow",children:[(0,u.jsx)(r.Z,{weight:700,children:s._(s._("Whitelist Checker"))}),(0,u.jsx)("div",{className:"mt-2 flex rounded-md shadow-sm",children:(0,u.jsx)("input",{value:v||e,onChange:e=>(0,o.EU)({value:e.target.value},[o.xU],(()=>x(e.target.value)),h),placeholder:"Permission list address",className:(0,c.AK)(a.X,p?"!border-red":"")})}),(0,u.jsx)("div",{className:"mt-2 flex rounded-md shadow-sm",children:(0,u.jsx)("input",{value:m,onChange:e=>(0,o.EU)({value:e.target.value},[o.xU],(()=>y(e.target.value)),h),placeholder:"User address",className:(0,c.AK)(a.X,p?"!border-red":"")})}),p?(0,u.jsx)(a.Z.HelperText,{className:"!text-red",children:p}):(0,u.jsx)(a.Z.HelperText,{className:(0,c.AK)("mt-2 text-sm",j?"!text-green":w?"!text-red":"text-gray-500"),children:j?s._(s._("Address is whitelisted for {0} {1}!",{0:null===b||void 0===b?void 0:b.toSignificant(6),1:null===b||void 0===b?void 0:b.currency.symbol})):w?s._(s._("Address is not whitelisted!")):s._(s._("Check if an address is whitelisted"))})]})})}},48511:function(e,t,s){"use strict";s.d(t,{xU:function(){return i},EU:function(){return a}});var n=s(19485);const i=async e=>{if(!e.value)return"Invalid input";try{(0,n.Kn)(e.value)}catch{return"Invalid address"}return!0},a=async(e,t,s,n)=>{if(s(),0===e.value.length)return n(),s();try{await Promise.all(t.map((async t=>{const s=await t(e);if("string"===typeof s)throw new Error(s);return!0}))),n()}catch(i){n(i.message)}}},53502:function(e,t,s){"use strict";s.d(t,{Fz:function(){return h},n8:function(){return m},ge:function(){return y}});var n=s(8198),i=s(9279),a=s(71923),r=s(25401),o=s(15615),l=s(83304),c=s(12614),d=s(1569),u=s(68411),p=s(67294);const h=e=>{const t=(0,d._Y)(e,new n.vU(o),"pointList");if(t&&Array.isArray(t)&&t.length===e.length){return t.map((e=>{var t;return String(null===e||void 0===e||null===(t=e.result)||void 0===t?void 0:t[0])}))}return Array(e.length).fill(i.d)},m=(e,t,s)=>{var n,i;const{account:o,chainId:u}=(0,c.a)(),p=(0,l.cq)(e,u?null===(n=r[u])||void 0===n||null===(i=n[a.bk[u]])||void 0===i?void 0:i.contracts.PointList.abi:void 0),{result:h}=(0,d.Wk)(p,"points",t?[t]:o?[o]:void 0);if(Array.isArray(h)&&h.length>0&&s){const{denominator:e,numerator:t}=new a.iA(a.QA.BigInt(h[0]),1);return a.ih.fromFractionalAmount(s,t,e)}},y=()=>{var e,t,s,n;const{account:i,chainId:o}=(0,c.a)(),d=(0,u.h7)(),h=(0,l.cq)(o?null===(e=r[o])||void 0===e||null===(t=e[a.bk[o]])||void 0===t?void 0:t.contracts.ListFactory.address:void 0,o?null===(s=r[o])||void 0===s||null===(n=s[a.bk[o]])||void 0===n?void 0:n.contracts.ListFactory.abi:void 0);return{subscribe:(0,p.useCallback)(((e,t)=>{h&&h.on(e,t)}),[h]),unsubscribe:(0,p.useCallback)(((e,t)=>{h&&h.off(e,t)}),[h]),init:(0,p.useCallback)((async(e,t)=>{if(!h)throw new Error("Contract not initialized");if(!i)throw new Error("Wallet not connected");const s=await h.deployPointList(i,e,t);return d(s,{summary:"Initialize permission list"}),s}),[i,d,h])}}},73700:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return q}});var n=s(63153),i=s(85169),a=s(71862),r=s(56785),o=s(38239),l=s(59499),c=s(95496),d=s(71923),u=s(10145),p=s(32871),h=s(14045),m=s(22244),y=s(63929),v=s(53502),x=s(36325),f=s(62483),b=s(12614),j=s(69260),w=s.n(j),g=s(67294),_=s(3085),A=s(49680),k=s(70028),O=s(85893);var P=({txHash:e,onDismiss:t,listAddress:s})=>{const{i18n:n}=(0,i.mV)();return(0,O.jsx)(k.S.SubmittedModalContent,{txHash:e,header:n._(n._("Success!")),subheader:n._(n._("Permission list creation transaction successfully submitted. Your newly created point list address will appear here once we receive the event from the blockchain")),onDismiss:t,children:(0,O.jsxs)("div",{className:"flex flex-col px-4 py-3 bg-dark-900 rounded border border-dark-700 mt-4",children:[(0,O.jsx)(r.Z,{variant:"sm",className:"text-secondary",children:n._(n._("Permission List Address"))}),s?(0,O.jsx)(r.Z,{variant:"sm",className:"text-high-emphesis",weight:700,children:(0,O.jsx)(A.Z,{toCopy:s,className:"text-high-emphesis opacity-100",children:s})}):(0,O.jsx)("div",{className:"w-4 h-4",children:(0,O.jsx)(w(),{animationData:m,autoplay:!0,loop:!0})})]})})};function N(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Z(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?N(Object(s),!0).forEach((function(t){(0,l.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var C=({open:e,onDismiss:t,data:s})=>{var n;const{chainId:a}=(0,b.a)(),{i18n:o}=(0,i.mV)(),{init:l,unsubscribe:c,subscribe:u}=(0,v.ge)(),{0:p,1:h}=(0,g.useState)(),{0:j,1:A}=(0,g.useState)(),{0:k,1:N}=(0,g.useState)(!1),C=null!==(n=(0,f.dQ)(s.paymentTokenAddress))&&void 0!==n?n:d.B5[a||1],{0:T,1:S}=(0,g.useState)(),E=(0,g.useCallback)((()=>{k||(h(void 0),A(void 0),S(void 0))}),[k]),D=(0,g.useCallback)((()=>{E(),t()}),[t,E]),L=(0,g.useCallback)((async e=>{if(!C)return;N(!0);const[t,s]=e.wlAddresses.reduce(((e,t)=>(e[0].push(t.account),e[1].push(new d.iA((0,_.toWei)(t.amount),d.QA.exponentiate(d.QA.BigInt(10),d.QA.BigInt(18-C.decimals))).quotient.toString()),e)),[[],[]]);try{const e=await l(t,s);null!==e&&void 0!==e&&e.hash&&(A(e.hash),await e.wait())}catch(i){var n;S(null===(n=i.error)||void 0===n?void 0:n.message)}finally{N(!1)}}),[l,C]);return(0,g.useEffect)((()=>(u("PointListDeployed",((e,t,s,n,{transactionHash:i})=>{(null===i||void 0===i?void 0:i.toLowerCase())===(null===j||void 0===j?void 0:j.toLowerCase())&&h(t)})),()=>{c("PointListDeployed",(()=>console.log("unsubscribed")))})),[u,j,c]),(0,O.jsx)(y.Z.Controlled,{isOpen:e,onDismiss:D,afterLeave:()=>A(void 0),children:j?(0,O.jsx)(P,{txHash:j,listAddress:p,onDismiss:D}):(0,O.jsxs)(y.Z.Body,{children:[(0,O.jsx)(y.Z.Header,{onClose:D,header:o._(o._("Create Permission List")),subheader:o._(o._("Please review your entered details thoroughly."))}),(0,O.jsx)(y.Z.Content,{children:(0,O.jsx)("div",{className:"flex flex-col gap-4",children:(0,O.jsxs)("div",{className:"flex flex-col divide-y divide-dark-700",children:[(0,O.jsxs)("div",{className:"flex justify-between gap-2 py-3",children:[(0,O.jsx)(r.Z,{variant:"sm",className:"text-secondary",children:o._(o._("Auction Payment Token"))}),(0,O.jsx)(r.Z,{weight:700,variant:"sm",className:"text-high-emphesis",children:(0,x.Sy)(s.paymentTokenAddress,12)})]}),(0,O.jsxs)("div",{className:"flex justify-between gap-2 py-3",children:[(0,O.jsx)(r.Z,{variant:"sm",className:"text-secondary",children:o._(o._("Point List"))}),(0,O.jsx)(r.Z,{weight:700,variant:"sm",className:"text-high-emphesis",children:o._(o._("{0} Addresses",{0:s.wlAddresses.length}))})]})]})})}),(0,O.jsxs)(y.Z.Actions,{children:[(0,O.jsx)(y.Z.Action,{onClick:D,children:o._(o._("Cancel"))}),(0,O.jsx)(y.Z.Action,Z(Z({main:!0},k&&{startIcon:(0,O.jsx)("div",{className:"w-4 h-4 mr-1",children:(0,O.jsx)(w(),{animationData:m,autoplay:!0,loop:!0})})}),{},{disabled:k,onClick:()=>L(s),children:o._(o._("Create Permission List"))}))]}),(0,O.jsx)(y.Z.Error,{children:T})]})})},T=s(80446),S=s(12281),E=s(87536);function D(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function L(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?D(Object(s),!0).forEach((function(t){(0,l.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):D(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const I=s(74231).Ry({paymentTokenAddress:S.q.required("Permission list must have a payment token address for decimals calculation")});var M=()=>{var e;const{i18n:t}=(0,i.mV)(),{account:s,chainId:n}=(0,b.a)(),{0:r,1:o}=(0,g.useState)(!1),l=(0,E.cI)({resolver:(0,c.X)(I),defaultValues:{paymentTokenAddress:"",wlAddresses:[]},mode:"onChange",reValidateMode:"onChange"}),{setValue:m,getValues:y,watch:v,formState:{errors:x}}=l,j=v(),w=null!==(e=(0,f.dQ)(j.paymentTokenAddress))&&void 0!==e?e:d.B5[n||1];return s?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(u.Z,L(L({},l),{},{onSubmit:l.handleSubmit((()=>o(!0))),children:(0,O.jsxs)(u.Z.Card,{children:[(0,O.jsxs)(u.Z.Section,{columns:6,header:(0,O.jsx)(u.Z.Section.Header,{header:t._(t._("General Details"))}),children:[(0,O.jsx)("div",{className:"col-span-6",children:(0,O.jsx)(h.Z,{name:"paymentTokenAddress",label:t._(t._("Auction Payment Currency*"))})}),(0,O.jsx)(T.Z,{value:y("wlAddresses"),disabled:!1,onChange:e=>m("wlAddresses","function"===typeof e?e(y("wlAddresses")):e)}),(0,O.jsx)("div",{className:"flex justify-end col-span-6",children:(0,O.jsx)("div",{children:(0,O.jsx)(a.ZP,{disabled:Object.keys(x).length>0,color:"blue",type:"submit",children:t._(t._("Review"))})})})]}),(0,O.jsx)(u.Z.Section,{header:(0,O.jsx)(O.Fragment,{}),children:(0,O.jsx)("div",{className:"col-span-6",children:(0,O.jsx)(p.Z,{paymentToken:w})})})]})})),(0,O.jsx)(C,{open:r,onDismiss:()=>o(!1),data:j})]}):(0,O.jsx)(O.Fragment,{})},F=s(87433),U=s(95497),V=s(41664);const H=()=>{const{i18n:e}=(0,i.mV)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(U.Zo,{className:"bg-miso-bowl bg-cover",children:(0,O.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,O.jsx)("div",{children:(0,O.jsx)(a.ZP,{color:"blue",variant:"filled",size:"sm",className:"!rounded-full",startIcon:(0,O.jsx)(n.wyc,{width:24,height:24}),children:(0,O.jsx)(V.default,{href:"/miso",children:e._(e._("All Auctions"))})})}),(0,O.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,O.jsx)(r.Z,{variant:"h2",className:"text-high-emphesis",weight:700,children:e._(e._("New Permission List"))}),(0,O.jsx)(r.Z,{variant:"sm",weight:400,children:e._(e._("Create a new permission list you can use to whitelist addresses."))})]})]})}),(0,O.jsx)(U.SX,{children:(0,O.jsx)(M,{})})]})};H.Layout=U.ZP,H.Guard=(0,F.Z)(o.L.MISO);var q=H},13301:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/miso/pointlist",function(){return s(73700)}])},15615:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"address payable","name":"_beneficiary","type":"address"},{"internalType":"bool","name":"readAndAgreedToMarketParticipationAgreement","type":"bool"}],"name":"commitEth","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"bool","name":"readAndAgreedToMarketParticipationAgreement","type":"bool"}],"name":"commitTokens","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"finalize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"beneficiary","type":"address"}],"name":"withdrawTokens","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawTokens","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_wallet","type":"address"}],"name":"setAuctionWallet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"marketTemplate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"wallet","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pointList","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')}},function(e){e.O(0,[7440,4221,8003,3978,5162,3588,145,6660,9774,2888,179],(function(){return t=13301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);